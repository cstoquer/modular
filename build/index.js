!function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){var o=e[r][1][t];return i(o?o:t)},d,d.exports,t,e,o,n)}return o[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(t,e,o){function n(t,e,o){var n=new XMLHttpRequest;n.responseType=e||"arraybuffer",n.onreadystatechange=function(){if(4===~~n.readyState)return 200!==~~n.status&&0!==~~n.status?o&&o("xhrError:"+n.status):o&&o(null,n.response)},n.open("GET",t,!0),n.send()}function i(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===~~o.readyState)return 200!==~~o.status?e("xhrError:"+o.status):e&&e(null,JSON.parse(o.response))},o.open("GET",t,!0),o.send()}function a(t,e){var o=new XMLHttpRequest;o.open("POST","req",!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onreadystatechange=function(){if(4===~~o.readyState){if(200!==~~o.status)return e&&e("xhr:"+o.status);var t=JSON.parse(o.response);return e&&e(t.error,t.result)}},o.send(JSON.stringify(t))}function r(t,e){var o=new Image;o.onload=function(){this.onload=null,this.onerror=null,e&&e(null,this)},o.onerror=function(){this.onload=null,this.onerror=null,e&&e("img:"+t)},o.src=t}function s(t,e){function o(){e&&e(null,i),i.removeEventListener("canplaythrough",o),i.removeEventListener("error",n)}function n(){e&&e("snd:load"),i.removeEventListener("canplaythrough",o),i.removeEventListener("error",n)}var i=new Audio;i.preload=!0,i.loop=!1,i.addEventListener("canplaythrough",o),i.addEventListener("error",n),i.src=t,i.load()}function u(t,e,o){function n(t,e){var o=t.split("/"),n=o.pop(),i=n.split(".");i.pop(),i=i.join(".");for(var r=a,s=0,u=o.length;s<u;s++)r=r[o[s]];r[i]=e,o.push(i),e.name=i,e.path=o.join("/")}function i(){var h=c+p,f=h/l;o&&o(c,h,l,f);var y,m;h<u?(y=t.img[h],m=r):(y=t.snd[h-u],m=s),p+=1,m(d+y,function(t,o){t||n(y,o),c+=1,p-=1,c+p<l?i():0===p&&e(null,a)})}var a=t.dat,u=t.img.length,l=u+t.snd.length,d=t.root,c=0,p=0;if(0===l)return e(null,a);for(var h=Math.min(5,l-1),f=0;f<=h;f++)i()}o.loadData=n,o.loadJson=i,o.sendRequest=a,o.loadImage=r,o.loadSound=s,o.preloadStaticAssets=u},{}],2:[function(t,e,o){e.exports=function(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}},{}],3:[function(t,e,o){e.exports={dat:{tilesheet:null,buffers:{"disco tom":{_type:"ProceduralBuffer",synthesizer:"disco",params:{freq:540,mod:400,envDuration:.7,ampCurve:.9,modCurve:1.8},loop:!1,tag:["music","synth","sfx"]},"hats line":{_type:"ProceduralBuffer",synthesizer:"hats",params:{uri:"audio/hihat.mp3",offset:1070,pattern:"O.......C.....ccO.......C...o...",polyphony:2,tempo:200,close:.3,accent:.2},loop:!0,tag:["music","hats"]},"white noise":{_type:"ProceduralBuffer",synthesizer:"noize",params:{length:.5},loop:!0,tag:["noise"]},"brown noise":{_type:"ProceduralBuffer",synthesizer:"noize",params:{color:1,length:3},loop:!0,tag:["noise"]},"colored noise":{_type:"ProceduralBuffer",synthesizer:"noize",params:{color:.7,length:3},loop:!0,tag:["noise"]},"binaural rain":{_type:"BufferData",id:"binaural rain",uri:"audio/binaural rain.mp3",loop:!0,start:.027,end:-.028,tag:["field","water","rain"]},"dusk to night":{_type:"BufferData",id:"dusk to night",uri:"audio/dusk to night.mp3",loop:!0,start:.053526530612244896,end:12.34141224489796,tag:["field","nature","insect","night"]},"cicada temple":{_type:"BufferData",id:"cicada temple",uri:"audio/cicada temple.mp3",loop:!0,start:.028,end:-.023,tag:["field","nature","insect","japan"]},campfire:{_type:"BufferData",id:"campfire",uri:"audio/campfire.mp3",loop:!0,start:.02844897959183674,end:-.015,tag:["field","fire","night"]},"water stream":{_type:"BufferData",id:"water stream",uri:"audio/water stream.mp3",loop:!0,start:.04086202504683514,end:-.035,tag:["field","water","stream"]},crume1:{_type:"BufferData",id:"crume1",uri:"audio/crume1.mp3",loop:!0,start:.027,end:-.021,tag:["field","water","stream"]},forest:{_type:"BufferData",id:"forest",uri:"audio/forest.mp3",loop:!0,start:.027,end:-.021,tag:["field","nature","forest","bird"]},"summer night":{_type:"BufferData",id:"summer night",uri:"audio/summer night.mp3",loop:!0,start:.05488163265306123,end:19.46671836734694,tag:["field","nature","insect","night"]},aerial:{_type:"BufferData",id:"aerial",uri:"audio/aerial.mp3",loop:!0,start:.027,end:-.033,tag:["synth","music","drone"]},"after daydream":{_type:"BufferData",id:"after daydream",uri:"audio/after daydream.mp3",loop:!0,start:.027,end:-.014,tag:["synth","music","pad"]},"damu drums1":{_type:"BufferData",id:"damu drums1",uri:"audio/damu drums1.mp3",loop:!0,ir:!1,start:.02720816326530612,end:5.259695238095238,tag:["music","drum","hiphop"]},"damu drums2":{_type:"BufferData",id:"damu drums2",uri:"audio/damu drums2.mp3",loop:!0,start:.026,end:-.024,tag:["music","drum","hiphop"]},x_b:{_type:"BufferData",id:"x_b",uri:"audio/x_b.mp3",loop:!0,start:.027,end:-.037,tag:["music","electro"]},"crystal cave":{_type:"BufferData",id:"crystal cave",uri:"audio/crystal cave.mp3",loop:!0,start:.026,end:-.025,tag:["music","chiptune","piano"]},failing:{_type:"BufferData",id:"failing",uri:"audio/failing.mp3",loop:!0,start:.027,end:-.037,tag:["music","electro"]},belllong:{_type:"BufferData",id:"belllong",uri:"audio/belllong.mp3",loop:!1,ir:!1,start:.027166978458049888,end:1.67146505574452,tag:["bell"]},"triangular room":{_type:"BufferData",id:"triangular room",uri:"audio/triangular room.mp3",loop:!1,ir:!0,start:0,end:0,tag:["reverb","room","real space"]},"EMT244 1s":{_type:"BufferData",id:"EMT244 1s",uri:"audio/EMT244 1s.mp3",loop:!1,ir:!0,start:.03258650805674443,end:.8154518006988665,tag:["reverb","hardware"]},"hexagonal room":{_type:"BufferData",id:"hexagonal room",uri:"audio/hexagonal room.mp3",loop:!1,ir:!0,start:.016718367346938778,end:3.3381006802721087,tag:["real space","reverb","room"]},"medium room":{_type:"BufferData",id:"medium room",uri:"audio/medium room.mp3",loop:!1,ir:!0,start:0,end:0,tag:["reverb","real space","room"]},tunnel:{_type:"BufferData",id:"tunnel",uri:"audio/tunnel.mp3",loop:!1,ir:!0,start:0,end:0,tag:["reverb","real space"]},"factory hall":{_type:"BufferData",id:"factory hall",uri:"audio/factory hall.mp3",loop:!1,ir:!0,start:0,end:0,tag:["real space","room","reverb"]},"singing bowl":{_type:"BufferData",id:"singing bowl",uri:"audio/singing bowl.mp3",loop:!1,ir:!1,start:.0270952380952381,end:14.814127891156463,tag:["bell"]},drop:{_type:"BufferData",id:"drop",uri:"audio/drop.mp3",loop:!1,ir:!1,start:.028299319727891153,end:.6508843537414966,tag:["water","drop"]},"EP Chicago":{_type:"BufferData",id:"EP Chicago",uri:"audio/EP Chicago.mp3",loop:!1,ir:!1,start:.027742346938775506,end:1.8682775510204082,tag:["EP","synth","note","music"]},"Fat Bass":{_type:"BufferData",id:"Fat Bass",uri:"audio/Fat Bass.mp3",loop:!1,ir:!1,start:.03325500900738183,end:2.2618762991307637,tag:["synth","note","analog","music"]},hihat:{_type:"BufferData",id:"hihat",uri:"audio/hihat.mp3",loop:!1,ir:!1,start:.02475141667995323,end:.4953959183673469,tag:[]},angelus:{_type:"BufferData",id:"angelus",uri:"audio/angelus.mp3",loop:!0,ir:!1,start:.02903945578231292,end:9.580016326530611,tag:["bell","church","field"]},boat:{_type:"BufferData",id:"boat",uri:"audio/boat.mp3",loop:!0,ir:!1,start:.029485671768707485,end:15.700300461781936,tag:["boat"]},"cicada summer":{_type:"BufferData",id:"cicada summer",uri:"audio/cicada summer.mp3",loop:!0,ir:!1,start:.02695229828042328,end:7.3718379039115645,tag:["ciccada","insect","nature","field","summer"]},city1:{_type:"BufferData",id:"city1",uri:"audio/city1.mp3",loop:!0,ir:!1,start:.03172789115646258,end:15.206385034013604,tag:["city","field"]},clock:{_type:"BufferData",id:"clock",uri:"audio/clock.mp3",loop:!0,ir:!1,start:.02949795918367347,end:7.676338775510204,tag:["mechanic","clock"]},cuckoo:{_type:"BufferData",id:"cuckoo",uri:"audio/cuckoo.mp3",loop:!0,ir:!1,start:.08289523809523809,end:7.010568707482993,tag:["bird","nature"]},"equatorial forest":{_type:"BufferData",id:"equatorial forest",uri:"audio/equatorial forest.mp3",loop:!0,ir:!1,start:.027978231292517013,end:10.110699319727892,tag:["tropical","nature","forest","insect","rain"]},fan:{_type:"BufferData",id:"fan",uri:"audio/fan.mp3",loop:!0,ir:!1,start:.027586394557823135,end:3.842361904761905,tag:["motor","fan"]},fireworks:{_type:"BufferData",id:"fireworks",uri:"audio/fireworks.mp3",loop:!0,ir:!1,start:.04865714285714286,end:23.575009523809523,tag:["outdoor","explosion","field"]},fishdog:{_type:"BufferData",id:"fishdog",uri:"audio/fishdog.mp3",loop:!0,ir:!1,start:.028334693877551023,end:13.91088163265306,tag:["noise"]},fridge:{_type:"BufferData",id:"fridge",uri:"audio/fridge.mp3",loop:!0,ir:!1,start:.028473469387755104,end:8.510008163265304,tag:["motor","house"]},gangas:{_type:"BufferData",id:"gangas",uri:"audio/gangas.mp3",loop:!0,ir:!1,start:.031857142857142855,end:17.4386,tag:["tropical","field","nature","insect"]},harbor:{_type:"BufferData",id:"harbor",uri:"audio/harbor.mp3",loop:!0,ir:!1,start:.029338775510204078,end:15.632677551020407,tag:["ocean","boat","wave"]},highway:{_type:"BufferData",id:"highway",uri:"audio/highway.mp3",loop:!0,ir:!1,start:.030824489795918363,end:10.010644897959184,tag:["road","motor"]},jungle:{_type:"BufferData",id:"jungle",uri:"audio/jungle.mp3",loop:!0,ir:!1,start:.02907891156462585,end:19.230185034013605,tag:["jungle","field","nature"]},mechanics1:{_type:"BufferData",id:"mechanics1",uri:"audio/mechanics1.mp3",loop:!0,ir:!1,start:.027323809523809525,end:3.9249727891156456,tag:["industrial","mechanic"]},mechanics2:{_type:"BufferData",id:"mechanics2",uri:"audio/mechanics2.mp3",loop:!0,ir:!1,start:.027609523809523813,end:5.802854421768708,tag:["industrial","mechanic"]},mechanics3:{_type:"BufferData",id:"mechanics3",uri:"audio/mechanics3.mp3",loop:!0,ir:!1,start:.0275265306122449,end:7.302941496598638,tag:["industrial","mechanic"]},mechanics4:{_type:"BufferData",id:"mechanics4",uri:"audio/mechanics4.mp3",loop:!0,ir:!1,start:.02721073672524565,end:4.144521023478836,tag:["inustrial","mechanic"]},mechanics5:{_type:"BufferData",id:"mechanics5",uri:"audio/mechanics5.mp3",loop:!0,ir:!1,start:.027477551020408164,end:5.15204081632653,tag:["industrial","mechanic"]},mechanics6:{_type:"BufferData",id:"mechanics6",uri:"audio/mechanics6.mp3",loop:!0,ir:!1,start:.026360544217687073,end:4.023673469387755,tag:["industrial","mechanic"]},mechanics7:{_type:"BufferData",id:"mechanics7",uri:"audio/mechanics7.mp3",loop:!0,ir:!1,start:.030775510204081636,end:9.813284353741498,tag:["industrial","mechanic"]},mechanics8:{_type:"BufferData",id:"mechanics8",uri:"audio/mechanics8.mp3",loop:!0,ir:!1,start:.031855782312925164,end:13.238155102040816,tag:["industrial","mechanic"]},motor1:{_type:"BufferData",id:"motor1",uri:"audio/motor1.mp3",loop:!0,ir:!1,start:.02782040816326531,end:3.7326367346938776,tag:["motor","industrial","mechanic"]},motor2:{_type:"BufferData",id:"motor2",uri:"audio/motor2.mp3",loop:!0,ir:!1,start:.027827210884353734,end:4.705753741496598,tag:["motor","industrial","mechanic"]},motor3:{_type:"BufferData",id:"motor3",uri:"audio/motor3.mp3",loop:!0,ir:!1,start:.027387755102040817,end:4.294040816326532,tag:["motor","industrial","mechanic"]},"ocean crushing":{_type:"BufferData",id:"ocean crushing",uri:"audio/ocean crushing.mp3",loop:!0,ir:!1,start:.02903945578231292,end:19.20509387755102,tag:["ocean","wave"]},"old device":{_type:"BufferData",id:"old device",uri:"audio/old device.mp3",loop:!0,ir:!1,start:.027460950491307635,end:2.235817799272487,tag:["noise"]},pebbles:{_type:"BufferData",id:"pebbles",uri:"audio/pebbles.mp3",loop:!0,ir:!1,start:.027066666666666666,end:17.884533333333337,tag:["ocean","pebble","wave"]},pen:{_type:"BufferData",id:"pen",uri:"audio/pen.mp3",loop:!0,ir:!1,start:.036514285714285714,end:4.882885714285714,tag:["pen"]},"railway station":{_type:"BufferData",id:"railway station",uri:"audio/railway station.mp3",loop:!0,ir:!1,start:.027697959183673466,end:18.30930612244898,tag:["train"]},"sea pebbles":{_type:"BufferData",id:"sea pebbles",uri:"audio/sea pebbles.mp3",loop:!0,ir:!1,start:.031229931972789112,end:26.05255238095238,tag:["ocean","pebble","wave"]},"sea rock":{_type:"BufferData",id:"sea rock",uri:"audio/sea rock.mp3",loop:!0,ir:!1,start:.02784757889266818,end:15.686376672335603,tag:["ocean"]},"sea sand":{_type:"BufferData",id:"sea sand",uri:"audio/sea sand.mp3",loop:!0,ir:!1,start:.030599999999999995,end:21.737333333333336,tag:["ocean","wave"]},"stock exchange":{_type:"BufferData",id:"stock exchange",uri:"audio/stock exchange.mp3",loop:!0,ir:!1,start:.027342857142857144,end:18.08022857142857,tag:["field","room","city","people"]},strangehead:{_type:"BufferData",id:"strangehead",uri:"audio/strangehead.mp3",loop:!0,ir:!1,start:.028824489795918364,end:8.36914693877551,tag:["noise"]},train1:{_type:"BufferData",id:"train1",uri:"audio/train1.mp3",loop:!0,ir:!1,start:.026632618811413447,end:17.594976664068405,tag:["train"]},"tropical forest":{_type:"BufferData",id:"tropical forest",uri:"audio/tropical forest.mp3",loop:!0,ir:!1,start:.031608134920634925,end:25.260167115457296,tag:["forest","nature","tropical","bird","insect"]},"atrem rain":{_type:"BufferData",id:"atrem rain",uri:"audio/atrem rain.mp3",loop:!0,ir:!1,start:.026677551020408165,end:13.451102040816327,tag:["rain"]},"car passing":{_type:"BufferData",id:"car passing",uri:"audio/car passing.mp3",loop:!0,ir:!1,start:.02733469387755102,end:14.153461224489796,tag:["car","road","field"]},crossroads:{_type:"BufferData",id:"crossroads",uri:"audio/crossroads.mp3",loop:!0,ir:!1,start:.02782857142857143,end:25.420737414965988,tag:["city","road","field","car"]},"ice bubbles":{_type:"BufferData",id:"ice bubbles",uri:"audio/ice bubbles.mp3",loop:!0,ir:!1,start:.02834285714285715,end:12.941213605442178,tag:["ice","bubble"]},"ice cube":{_type:"BufferData",id:"ice cube",uri:"audio/ice cube.mp3",loop:!1,ir:!1,start:0,end:0,tag:["ice"]},"ice cube2":{_type:"BufferData",id:"ice cube2",uri:"audio/ice cube2.mp3",loop:!1,ir:!1,start:0,end:0,tag:["ice"]},pool1:{_type:"BufferData",id:"pool1",uri:"audio/pool1.mp3",loop:!1,ir:!1,start:0,end:0,tag:["pool","ball"]},pool2:{_type:"BufferData",id:"pool2",uri:"audio/pool2.mp3",loop:!1,ir:!1,start:0,end:0,tag:["pool","ball"]},pool3:{_type:"BufferData",id:"pool3",uri:"audio/pool3.mp3",loop:!1,ir:!1,start:0,end:0,tag:["pool","ball"]},pool4:{_type:"BufferData",id:"pool4",uri:"audio/pool4.mp3",loop:!1,ir:!1,start:0,end:0,tag:["pool","ball"]},rooster:{_type:"BufferData",id:"rooster",uri:"audio/rooster.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bird"]},"sailing ship":{_type:"BufferData",id:"sailing ship",uri:"audio/sailing ship.mp3",loop:!0,ir:!1,start:.029028571428571428,end:19.877314285714288,tag:["boat","ocean"]},suzu1:{_type:"BufferData",id:"suzu1",uri:"audio/suzu1.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bell","wind","chime"]},suzu2:{_type:"BufferData",id:"suzu2",uri:"audio/suzu2.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bell","wind","chime"]},suzu3:{_type:"BufferData",id:"suzu3",uri:"audio/suzu3.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bell","wind","chime"]},suzu4:{_type:"BufferData",id:"suzu4",uri:"audio/suzu4.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bell","wind","chime"]},theater:{_type:"BufferData",id:"theater",uri:"audio/theater.mp3",loop:!0,ir:!1,start:.028122448979591836,end:8.27275918367347,tag:["people","room","talking","theater"]},"water runoff":{_type:"BufferData",id:"water runoff",uri:"audio/water runoff.mp3",loop:!0,ir:!1,start:.027946938775510202,end:13.06485306122449,tag:["water","cave","drop"]},"water spring":{_type:"BufferData",id:"water spring",uri:"audio/water spring.mp3",loop:!0,ir:!1,start:.038462585034013605,end:13.398266666666666,tag:["water","stream","nature"]},"woodpecker peck":{_type:"BufferData",id:"woodpecker peck",uri:"audio/woodpecker peck.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bird"]},"woodpecker squeak":{_type:"BufferData",id:"woodpecker squeak",uri:"audio/woodpecker squeak.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bird"]},"ueno gong1":{_type:"BufferData",id:"ueno gong1",uri:"audio/ueno gong1.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bell","temple","japan"]},"ueno gong2":{_type:"BufferData",id:"ueno gong2",uri:"audio/ueno gong2.mp3",loop:!1,ir:!1,start:0,end:0,tag:["bell","temple","japan"]},"ueno gong3":{_type:"BufferData",id:"ueno gong3",uri:"audio/ueno gong3.mp3",loop:!1,ir:!1,start:.029462585034013604,end:7.940789115646258,tag:["bell","temple","japan"]}},maps:{_type:"maps",maps:[{w:8,h:4,name:"map",sheet:"",data:"!!|J"}]}},root:"assets/",img:["tilesheet.png"],snd:[],settings:{name:"Modular",version:"2.0.0",screen:{width:800,height:600,pixelSize:{width:1,height:1},fullscreen:!1,resizable:!0},tileSize:[8,8],palette:["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.1)"],controls:{up:38,down:40,left:37,right:39,A:32,B:88},touchEvent:{multiTouch:!1,disableContextMenu:!1,hideMousePointer:!1},loaderColors:[0,1],components:{pixelboxCore:!1,keyboard:!1,TINA:!1,AudioManager:!1}}}},{}],4:[function(t,e,o){function n(t,e,o){this.endPoint=t,this.connections=[],s.call(this,t,e,o)}function i(t,e,o){n.call(this,t,e,o)}function a(t,e,o){n.call(this,t,e,o)}var r=t("./connectors"),s=t("./Connector");inherits(n,s),n.prototype.color="#fd870e",n.prototype.type="audio",n.prototype.bind=function(t,e,o){var n=o.endPoint.split(".");this.endPoint=t;for(var i=0;i<n.length;i++)this.endPoint=this.endPoint[n[i]];var a=this.connections;this.connections=[];for(var i=a.length-1;i>=0;i--)this.connect(a[i])},n.prototype.connect=function(t){s.prototype.connect.call(this,t),this._addConnection(t),t._addConnection(this)},n.prototype.disconnect=function(t){s.prototype.disconnect.call(this,t),this._removeConnection(t),t._removeConnection(this)},n.prototype._addConnection=function(t){this.connections.push(t)},n.prototype._removeConnection=function(t){var e=this.connections.indexOf(t);e!==-1&&this.connections.splice(e,1)},inherits(i,n),i.prototype.cssClassName="audioIn",i.prototype.way="input",r.register(i,"input","audio"),i.prototype.connect=function(t){n.prototype.connect.call(this,t),t.endPoint.connect(this.endPoint)},inherits(a,n),a.prototype.cssClassName="audioOut",a.prototype.way="output",r.register(a,"output","audio"),a.prototype.connect=function(t){n.prototype.connect.call(this,t),this.endPoint.connect(t.endPoint)},a.prototype.disconnect=function(t){n.prototype.disconnect.call(this,t),this.endPoint.disconnect(t.endPoint)},a.prototype.isCompatible=function(t){return"param"===t.type&&"input"===t.way||n.prototype.isCompatible.call(this,t)}},{"./Connector":8,"./connectors":17}],5:[function(t,e,o){function n(t){i.call(this,t);var e="bufferAudio";if(t.ir&&(e="bufferIR"),"ProceduralBuffer"===t.type&&(e="bufferProcedural"),this.addClassName(e),this.setTitle(t.id),this.buffer=null,!t)return console.warn("Buffer module should be initialized with buffer data.");var o=this;t.loadAudioBuffer(function(e){return e?(console.error("Could not load buffer",t,e),void o.addClassName("bufferFailed")):(o.buffer=t,void o.onLoad())})}var i=t("./Module");inherits(n,i),n.prototype.onConnect=function(t){this.buffer&&this.$data.emitTo(t,{_type:"buffer",buffer:this.buffer})},n.prototype.onLoad=function(){this.$data.emit({_type:"buffer",buffer:this.buffer})},n.prototype.descriptor={type:"Buffer",size:1,outputs:{data:{type:"event",x:5,y:0,label:null,onConnect:"onConnect"}}},e.exports=n},{"./Module":13}],6:[function(t,e,o){function n(t,e,o){this.initGUI(t,e,o),this.bind(t,e,o)}n.prototype.initGUI=function(t,e,o){},n.prototype.setTitle=function(t){},n.prototype.bind=function(t,e,o){var n=o.endPoint;if(n){var i=t;n=n.split(".");for(var a=n.pop(),r=0;r<n.length;r++)i=i[n[r]];this.caller=i,this.endPoint=this.caller[a]}},e.exports=n},{}],7:[function(t,e,o){function n(t,e,o){this.endPointA=t,this.endPointB=e,this.color=o||"#555",this.id=this.getId(t,e),this.x=0,this.y=0,this.a=0,this.b=0,this.c=0,this.d=0,this.w=0,this.h=0,this.update(),t.module.addCable(this),e.module.addCable(this)}e.exports=n,n.prototype.getId=function(t,e){return t.module.id+":"+t.id+"--"+e.module.id+":"+e.id},n.prototype.draw=function(){},n.prototype.update=function(){},n.prototype.disconnect=function(){this.endPointA&&(this.endPointA.disconnect(this.endPointB),this.endPointB.disconnect(this.endPointA),this.endPointA.module.removeCable(this),this.endPointB.module.removeCable(this)),this.endPointA=null,this.endPointB=null}},{}],8:[function(t,e,o){function n(t,e,o){this.module=t,this.id=e,this.x=o.x,this.y=o.y,this.singleConnection=void 0!==o.singleConnection&&!!o.singleConnection,this.initGUI(t,e,o),this.bind(t,e,o)}var i=t("./connectors");e.exports=n,n.prototype.cssClassName="connector",n.prototype.color="#2da8ff",n.prototype.type="none",n.prototype.way="input",i.register(n,"input","none"),n.prototype.bind=function(t,e,o){},n.prototype.connect=function(t){var e=this.module.patch;this.singleConnection&&e.disconnect(this),t.singleConnection&&e.disconnect(t),e.addCable(this,t,this.color)},n.prototype.disconnect=function(t){},n.prototype.isCompatible=function(t){return t!==this&&(this.type===t.type&&this.way!==t.way)},n.prototype.initGUI=function(t,e,o){}},{"./connectors":17}],9:[function(t,e,o){function n(t,e){e=e||"",e=e.split("."),endPoint=t;for(var o=0;o<e.length;o++)endPoint=endPoint[e[o]];return endPoint}function i(t,e,o){s.call(this,t,e,o),this.onConnect=o.onConnect?n(t,o.onConnect):null,this.onDisconnect=o.onDisconnect?n(t,o.onDisconnect):null}function a(t,e,o){s.call(this,t,e,o),this.connections=[],this.onConnect=o.onConnect?n(t,o.onConnect):null,this.onDisconnect=o.onDisconnect?n(t,o.onDisconnect):null}var r=t("./connectors"),s=t("./Connector"),u="#2da8ff";inherits(i,s),i.prototype.cssClassName="eventIn",i.prototype.color=u,i.prototype.type="event",i.prototype.way="input",r.register(i,"input","event"),i.prototype.bind=function(t,e,o){this.endPoint=n(t,o.endPoint)},i.prototype.connect=function(t){t.connect(this),this.onConnect&&this.onConnect.call(this.module,t)},i.prototype.disconnect=function(t){this.onDisconnect&&this.onDisconnect.call(this.module,t)},inherits(a,s),a.prototype.cssClassName="eventOut",a.prototype.color=u,a.prototype.type="event",a.prototype.way="output",r.register(a,"output","event"),a.prototype.connect=function(t){s.prototype.connect.call(this,t),this.connections.push(t),this.onConnect&&this.onConnect.call(this.module,t)},a.prototype.disconnect=function(t){var e=this.connections.indexOf(t);e!==-1&&(this.connections.splice(e,1),this.onDisconnect&&this.onDisconnect.call(this.module,t))},a.prototype.emit=function(t){t=t||{};for(var e=0;e<this.connections.length;e++){var o=this.connections[e];o.endPoint.call(o.module,t,this)}},a.prototype.emitTo=function(t,e){t.endPoint.call(t.module,e,this)}},{"./Connector":8,"./connectors":17}],10:[function(t,e,o){function n(){this._events={}}e.exports=n,n.listenerCount=function(t,e){var o=t._events[e];return o?o.length:0},n.prototype.on=function(t,e){if("function"!=typeof e)throw new TypeError("Tried to register non-function as event handler: "+t);var o=this._events,n=o[t];return void 0===n?o[t]=[e]:n.push(e),this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(t,e){return e.once?e.once+=1:e.once=1,this.on(t,e)},n.prototype.removeListener=function(t,e){var o=this._events[t];if(void 0!==o){var n=o.indexOf(e);if(n===-1)return console.warn("No event listener registered",t,e),this;o.splice(n,1),0===o.length&&delete this._events[t]}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(t){return t?delete this._events[t]:this._events={},this},n.prototype.hasListeners=function(t){return void 0!==this._events[t]},n.prototype.listeners=function(t){var e=this._events[t];return void 0!==e?e.slice():[]},n.prototype.emit=function(t){var e=this._events[t];if(void 0===e)return!1;e=e.slice();for(var o=!1,n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);for(var i=0,a=e.length;i<a;i++){var r=e[i];r.apply(this,n),o=!0,r.once&&(r.once>1?r.once--:delete r.once,this.removeListener(t,r))}return o}},{}],11:[function(t,e,o){function n(t,e,o){this.value=0,this.x=o.x,this.y=o.y,this.min=o.min||0,this.max=void 0!==o.max?o.max:1,this.int=o.int||!1,this.initGUI(t,e,o),this.bind(t,e,o)}var i=t("./utils").map;n.prototype.bind=function(t,e,o){this.id=e,this.module=t,this.valueId=o.value||"value",this.endPoint=t;var n=o.endPoint;if(n){n=n.split(".");for(var i=0;i<n.length;i++)this.endPoint=this.endPoint[n[i]]}this.initValue()},n.prototype.initValue=function(){var t=this.endPoint[this.valueId];void 0===t&&(t=0),this.value=i(t,this.min,this.max,-68,68),this.updateGUI()},n.prototype.updateValue=function(){var t=i(this.value,-68,68,this.min,this.max);this.int&&(t=~~Math.round(t)),this.endPoint[this.valueId]=t,this.displayValue(t)},n.prototype.getState=function(){return this.value},n.prototype.setState=function(t){this.value=t,this.updateValue(),this.updateGUI()},n.prototype.initGUI=function(t,e,o){},n.prototype.updateGUI=function(){},n.prototype.displayValue=function(t){},e.exports=n},{"./utils":20}],12:[function(t,e,o){function n(t){var e=t.data,o=e[0];if(!(o>=240)){var n=(240&o)>>4,i=MIDI_MESSAGE_TYPES[n];if(i){var a=15&o,r=e[1],u=e[2],l={_type:"midi message",channel:a,midiType:i};switch(i){case"note on":case"note off":l.note=r,l.velocity=u;break;case"control change":l.control=r,l.value=u;break;default:l.data1=r,l.data2=u}s.emit("message",l)}}}function i(t){console.error("requestMIDIAccess failed",t)}function a(t){for(var e=t.inputs.values(),o=e.next();o&&!o.done;o=e.next())o.value.onmidimessage=n}var r=t("./EventEmitter");MIDI_MESSAGE_TYPES={8:"note off",9:"note on",10:"aftertouch",11:"control change",12:"program change",13:"channel pressure",14:"pitch bend"};var s=new r,u=!1;e.exports=s,s.open=function(){u||(u=!0,navigator.requestMIDIAccess({sysex:!1}).then(a,i))}},{"./EventEmitter":10}],13:[function(t,e,o){function n(){if(this.patch=null,this.id=null,this.x=null,this.y=null,this.cables={},this.initGUI(),this.createInterface(),arguments.length){this._arguments=[];for(var t=0;t<arguments.length;t++){var e=arguments[t];e.serialize?this._arguments.push(e.serialize()):this._arguments.push(e)}}}var i=t("./connectors"),a={knob:t("./Knob"),button:t("./Button")};n.prototype.descriptor={},n.prototype.createInterface=function(){if(this.descriptor.inputs)for(var t in this.descriptor.inputs){var e=this.descriptor.inputs[t],o=i.getConnector("input",e.type);o&&(this["$"+t]=new o(this,t,e))}if(this.descriptor.outputs)for(var t in this.descriptor.outputs){var n=this.descriptor.outputs[t],o=i.getConnector("output",n.type);o&&(this["$"+t]=new o(this,t,n))}if(this.descriptor.controls)for(var t in this.descriptor.controls){var r=this.descriptor.controls[t],s=a[r.type];this["$$"+t]=new s(this,t,r)}},n.prototype.rebind=function(){if(this.descriptor.inputs)for(var t in this.descriptor.inputs)this["$"+t]&&this["$"+t].bind(this,t,this.descriptor.inputs[t]);if(this.descriptor.outputs)for(var t in this.descriptor.outputs)this["$"+t]&&this["$"+t].bind(this,t,this.descriptor.outputs[t]);if(this.descriptor.controls)for(var t in this.descriptor.controls)this["$$"+t]&&this["$$"+t].bind(this,t,this.descriptor.controls[t])},n.prototype.setPosition=function(t,e){this.x=t,this.y=e},n.prototype.remove=function(){for(var t in this.cables)this.patch.removeCable(this.cables[t])},n.prototype.addCable=function(t){this.cables[t.id]=t},n.prototype.removeCable=function(t){delete this.cables[t.id]},n.prototype.getState=function(){var t={_type:this.descriptor.type,id:this.id,x:this.x,y:this.y};if(this._arguments&&(t.arguments=this._arguments),this.descriptor.controls){t.controls={};for(var e in this.descriptor.controls)this["$$"+e].getState&&(t.controls[e]=this["$$"+e].getState())}var o=this.descriptor.persistent;if(o){t.persistent=[];for(var n=0;n<o.length;n++)t.persistent.push(this[o[n]])}return t},n.prototype.setState=function(t){if(t.controls)for(var e in this.descriptor.controls)t.controls[e]&&this["$$"+e].setState(t.controls[e]);if(t.persistent)for(var o=0;o<this.descriptor.persistent.length;o++){var e=this.descriptor.persistent[o];this[e]=t.persistent[o]}},n.prototype.initGUI=function(){},n.prototype.select=function(){},n.prototype.deselect=function(){},n.prototype.setTitle=function(){},n.prototype.setColor=function(){},n.prototype.setBorder=function(){},n.prototype.addClassName=function(){},e.exports=n},{"./Button":6,"./Knob":11,"./connectors":17}],14:[function(t,e,o){function n(t,e,o){this.connections=[],s.call(this,t,e,o)}function i(t,e,o){this.endPoint=t,this.min=void 0===o.min?0:o.min,this.max=void 0===o.max?1:o.max,n.call(this,t,e,o)}function a(t,e,o){n.call(this,t,e,o)}var r=t("./connectors"),s=t("./Connector");inherits(n,s),n.prototype.color="#2da8ff",n.prototype.type="param",n.prototype.connect=function(t){s.prototype.connect.call(this,t),this._addConnection(t),t._addConnection(this)},n.prototype.disconnect=function(t){s.prototype.disconnect.call(this,t),this._removeConnection(t),t._removeConnection(this)},n.prototype._addConnection=function(t){this.connections.push(t)},n.prototype._removeConnection=function(t){var e=this.connections.indexOf(t);e!==-1&&this.connections.splice(e,1)},inherits(i,n),i.prototype.cssClassName="paramIn",i.prototype.way="input",r.register(i,"input","param"),i.prototype.bind=function(t,e,o){var n=o.endPoint.split(".");this.endPoint=t;for(var i=0;i<n.length;i++)this.endPoint=this.endPoint[n[i]];var a=this.connections;this.connections=[];for(var i=a.length-1;i>=0;i--)this.connect(a[i])},i.prototype.isCompatible=function(t){return"audio"===t.type&&"output"===t.way||n.prototype.isCompatible.call(this,t)},i.prototype.connect=function(t){n.prototype.connect.call(this,t),"audio"===t.type&&"output"===t.way&&t.endPoint.connect(this.endPoint)},inherits(a,n),a.prototype.cssClassName="paramOut",a.prototype.way="output",r.register(a,"output","param"),a.prototype.setAutomation=function(t){for(var e=this.connections,o=0;o<e.length;o++){var n=e[o];t(n.endPoint,n.min,n.max)}}},{"./Connector":8,"./connectors":17}],15:[function(t,e,o){function n(){this._idCount=0,this.modules={},this.cables={},this.grid=[[]]}function i(t,e){function o(){return t.apply(this,e)}return o.prototype=t.prototype,new o}var a=t("./Cable"),r=t("./modules"),s=t("../data/dataTypes");n.prototype.addModule=function(t,e){for(void 0===e?e=this._idCount++:this.modules[e]&&console.error("Provided id is already used.");this.modules[e];)e=this._idCount++;return t.id=e,t.patch=this,this.modules[e]=t,t},n.prototype.removeModule=function(t){function e(e){var o=e.indexOf(t);return o===-1?console.error("Module not found."):void e.splice(o,1)}delete this.modules[t.id],t.id<this._idCount&&(this._idCount=t.id),e(this.grid[t.x]),t.remove()},n.prototype.disconnect=function(t){for(var e=this.findCables(t),o=0;o<e.length;o++)this.removeCable(e[o])},n.prototype.findCables=function(t){var e=t.module.id+":"+t.id,o=[];for(var n in this.cables){var i=n.split("--");i[0]!==e&&i[1]!==e||o.push(this.cables[n])}return o},n.prototype.areConnected=function(t,e){var o=t.module.id+":"+t.id,n=e.module.id+":"+e.id;return this.cables[o+"--"+n]||this.cables[n+"--"+o]},n.prototype.addCable=function(t,e,o){if(!this.areConnected(t,e)){var n=new a(t,e,o);this.cables[n.id]=n}},n.prototype.removeCable=function(t){this.cables[t.id]&&(t.disconnect(),delete this.cables[t.id])},n.prototype.clearPatch=function(){for(var t in this.cables)this.removeCable(this.cables[t]);for(var t in this.modules)this.removeModule(this.modules[t]);this._idCount=0},n.prototype.getPatch=function(){var t={_type:"modularPatch",version:1,modules:[],cables:[]};for(var e in this.modules)t.modules.push(this.modules[e].getState());for(var e in this.cables)t.cables.push(e);return t},n.prototype.setPatch=function(t){if(!t||"modularPatch"===!t._type)return console.error("Wrong format");
this.clearPatch();for(var e=t.modules||[],o=0;o<e.length;o++){var n=e[o],a=r.getModuleConstructor(n._type);if(a){var u;if(n.arguments){for(var l=n.arguments,d=0;d<l.length;d++)l[d]=s.deserialize(l[d]);u=i(a,l)}else u=new a;this.addModule(u,n.id),this._addModuleInGrid(u,n.x,n.y),u.setState(n)}else console.error("Could not create module of type",n._type)}for(var c=t.cables||[],o=0;o<c.length;o++){var p=c[o];connections=p.split("--"),connectionA=connections[0].split(":"),connectionB=connections[1].split(":"),moduleA=this.modules[connectionA[0]],moduleB=this.modules[connectionB[0]],connectorA=moduleA["$"+connectionA[1]],connectorB=moduleB["$"+connectionB[1]],connectorA.connect(connectorB)}},n.prototype._addModuleInGrid=function(t,e,o){e=e||0,o=o||1,this.grid[e]||(this.grid[e]=[]);for(var n=this.grid[e],i=(t.descriptor.size,0),a=o;i<n.length;i++){var r=n[i];if(r.y<o&&r.y+r.descriptor.size>=o){a=r.y+r.descriptor.size,i++;break}if(r.y>=o)break}t.setPosition(e,a),n.splice(i,0,t),a+=t.descriptor.size;for(var s=i+1;s<n.length;s++){var r=n[s];if(r.y>=a)break;r.setPosition(r.x,a),a+=r.descriptor.size}},n.prototype.moveModule=function(t,e,o){if(null!==t.x){var n=this.grid[t.x],i=n.indexOf(t);if(i===-1)return console.error("Module not found in grid.");n.splice(i,1)}this._addModuleInGrid(t,e,o)},e.exports=n},{"../data/dataTypes":23,"./Cable":7,"./modules":19}],16:[function(t,e,o){var n=window.AudioContext||window.webkitAudioContext,i=new n;e.exports=i},{}],17:[function(t,e,o){connectors={input:{},output:{}},o.register=function(t,e,o){connectors[e]&&(connectors[e][o]=t)},o.getConnector=function(t,e){if(connectors[t])return connectors[t][e]},t("./AudioConnector"),t("./EventConnector"),t("./ParamConnector")},{"./AudioConnector":4,"./EventConnector":9,"./ParamConnector":14}],18:[function(t,e,o){o.SAMPLER="Sampler",o.OSC="Osc",o.GAIN="Gain",o.FILTER="Filter",o.ENVELOPE="Envelope",o.EFFECT="Effect",o.DATA="Data",o.CONTROL="Control",o.IN_OUT="In/Out"},{}],19:[function(t,e,o){var n={};o.add=function(t,e){var o=t.prototype.descriptor;o._category=e,n[o.type]=t},o.getModuleConstructor=function(t){return n[t]},o.getList=function(){return n}},{}],20:[function(t,e,o){o.map=function(t,e,o,n,i){return n+(i-n)*(t-e)/(o-e)},o.copyObject=function(t){return JSON.parse(JSON.stringify(t))}},{}],21:[function(t,e,o){function n(t,e){this.id=t,this.buffer=void 0,this.uri=e.uri,this.loop=e.loop||!1,this.ir=e.ir||!1,this.start=e.start||0,this.end=e.end||0,this.tag=e.tag||[]}var i=t("../loaders/loadAudioBuffer");n.deserialize=function(t){return new n(t.id,t)},n.prototype.serialize=function(){return{_type:"BufferData",id:this.id,uri:this.uri,loop:this.loop,ir:this.ir,start:this.start,end:this.end,tag:this.tag}},n.prototype.loadAudioBuffer=function(t){if(this.buffer)return window.setTimeout(t,0);var e=this;i(this.uri,function(o,n){return o?t(o):(e.buffer=n,t())})},e.exports=n},{"../loaders/loadAudioBuffer":24}],22:[function(t,e,o){function n(t,e){this.id=t,this.buffer=void 0,this.synthesizer=e.synthesizer,this.params=e.params,this.loop=e.loop||!1,this.ir=e.ir||!1,this.start=e.start||0,this.end=e.end||0,this.tag=e.tag||[]}var i=t("../synthesizers");n.deserialize=function(t){return new n(t.id,t)},n.prototype.type="ProceduralBuffer",n.prototype.serialize=function(){return{_type:"ProceduralBuffer",id:this.id,synthesizer:this.synthesizer,params:this.params,loop:this.loop,ir:this.ir,start:this.start,end:this.end,tag:this.tag}},n.prototype.loadAudioBuffer=function(t){return this.buffer?window.setTimeout(t,0):void this.generateBuffer(t)},n.prototype.generateBuffer=function(t){var e=i.getSynth(this.synthesizer);return e?void e.generate(this,t):void window.setTimeout(function(){t("Synthesizer "+this.synthesizer+" does not exists.")},0)},e.exports=n},{"../synthesizers":68}],23:[function(t,e,o){function n(t){var e=t._type,o=i[e];return o?o.deserialize(t):t}var i={BufferData:t("./BufferData"),ProceduralBuffer:t("./ProceduralBuffer")};o.deserialize=n,o.initializeDatabase=function(t){for(var e in t){var o=t[e];o.id||(o.id=e),t[e]=n(o)}}},{"./BufferData":21,"./ProceduralBuffer":22}],24:[function(t,e,o){var n=t("../core/audioContext");e.exports=function(t,e){var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(4===~~o.readyState)return 200!==~~o.status&&0!==~~o.status?e("xhrError:"+o.status):void n.decodeAudioData(o.response,function(t){return e(null,t)},e)},o.open("GET",t,!0),o.send()}},{"../core/audioContext":16}],25:[function(t,e,o){var n=function(){try{var t=_REQUIRE_("electron");return!!t}catch(t){return!1}}();n?e.exports=_REQUIRE_("electron").remote._REQUIRE_("./tools/commands"):e.exports=function(t,e){var o=new XMLHttpRequest;o.open("POST","req",!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.onreadystatechange=function(){if(4===~~o.readyState){if(200!==~~o.status)return e&&e("xhr:"+o.status);var t=JSON.parse(o.response);return e&&e(t.error,t.result)}},o.send(JSON.stringify(t))}},{}],26:[function(t,e,o){t("./modules"),t("./data/dataTypes").initializeDatabase(window.assets.buffers),t("./ui/moduleGUI"),t("./ui/connectorGUI"),t("./ui/cableGUI"),t("./ui/knobGUI"),t("./ui/buttonGUI"),t("./ui/menuHeader"),t("./ui/moduleManager"),t("./ui/dropFile"),t("./ui/onWindowResize");var n=t("./ui/synthEditor");n.register("disco",t("./synthesizers/disco/editor")),n.register("hats",t("./synthesizers/hats/editor")),t("./modular")},{"./data/dataTypes":23,"./modular":27,"./modules":63,"./synthesizers/disco/editor":64,"./synthesizers/hats/editor":66,"./ui/buttonGUI":74,"./ui/cableGUI":75,"./ui/connectorGUI":76,"./ui/dropFile":80,"./ui/knobGUI":81,"./ui/menuHeader":82,"./ui/moduleGUI":83,"./ui/moduleManager":85,"./ui/onWindowResize":86,"./ui/synthEditor":93}],27:[function(t,e,o){window.inherits=t("inherits"),window.MODULAR={Patch:t("./core/Patch"),Synths:t("./synthesizers")}},{"./core/Patch":15,"./synthesizers":68,inherits:2}],28:[function(t,e,o){function n(){this.node=i.createGain(),this.node.gain.value=0,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Amp",name:"Amp",size:2,inputs:{IN:{type:"audio",x:0,y:1,endPoint:"node",label:"IN"},MOD:{type:"param",x:3.5,y:0,endPoint:"node.gain",label:"MOD"}},outputs:{OUT:{type:"audio",x:3.5,y:1,endPoint:"node",label:"OUT"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],29:[function(t,e,o){function n(){this.data=null,this.duration=5,this.timeout=null,i.call(this),this.scheduleNext()}var i=t("../core/Module");inherits(n,i),n.prototype.onDataIn=function(t){this.data=t},n.prototype.scheduleNext=function(){var t=this;this.timeout=window.setTimeout(function(){t.$OUT.emit(this.data),t.scheduleNext()},1e3*this.duration)},n.prototype.remove=function(){null!==this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null),i.prototype.remove.call(this)},n.prototype.descriptor={type:"AutoBang",name:"AutoBang",size:2,inputs:{IN:{type:"event",x:0,y:1,label:"DATA",endPoint:"onDataIn"}},outputs:{OUT:{type:"event",x:2.3,y:1}},controls:{duration:{type:"knob",x:4,y:.1,min:1,max:10,value:"duration"}}},e.exports=n},{"../core/Module":13}],30:[function(t,e,o){function n(){this.gainA=i.createGain(),this.gainB=i.createGain(),this.mix=i.createGain(),this.gainA.connect(this.mix),this.gainB.connect(this.mix),this.duration=5,this.channel=!1,this.gainA.gain.value=1,this.gainB.gain.value=0,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.trigger=function(){var t=i.currentTime;this.channel=!this.channel;var e=this.gainA.gain.value,o=this.gainB.gain.value,n=this.channel?0:1,a=this.channel?1:0;this.gainA.gain.cancelScheduledValues(0),this.gainB.gain.cancelScheduledValues(0),this.gainA.gain.setValueAtTime(e,t),this.gainA.gain.linearRampToValueAtTime(n,t+this.duration),this.gainB.gain.setValueAtTime(o,t),this.gainB.gain.linearRampToValueAtTime(a,t+this.duration)},n.prototype.descriptor={type:"AutoXFade",name:"AutoXFade",size:4,inputs:{A:{type:"audio",x:0,y:.8,endPoint:"gainA",label:"A"},B:{type:"audio",x:0,y:1.8,endPoint:"gainB",label:"B"},TRG:{type:"event",x:0,y:3.2,endPoint:"trigger",label:"TRG"}},outputs:{OUT:{type:"audio",x:3.5,y:3.2,endPoint:"mix",label:"OUT"}},controls:{duration:{type:"knob",x:2.2,y:.8,min:.5,max:20,endPoint:null,value:"duration",label:"TIME"},volume:{type:"knob",x:4.2,y:.8,min:0,max:1,endPoint:"mix.gain",value:"value",label:"VOL"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],31:[function(t,e,o){function n(){i.call(this),this.data=null}var i=t("../core/Module");inherits(n,i),n.prototype.onDataIn=function(t){this.data=t},n.prototype.pushButton=function(){this.$OUT.emit(this.data)},n.prototype.descriptor={type:"Bang",name:"Bang",size:2,inputs:{IN:{type:"event",x:3.5,y:0,label:"DATA",endPoint:"onDataIn",singleConnection:!0}},outputs:{OUT:{type:"event",x:3.5,y:1,label:"OUT"}},controls:{BTN:{type:"button",x:1.8,y:.1,endPoint:"pushButton"}}},e.exports=n},{"../core/Module":13}],32:[function(t,e,o){function n(){this.buffer=null,this._nslices=16,this._slice=0,this._length=1,this._startOfst=0,this._endOfst=0,i.call(this)}var i=(t("../core/audioContext"),t("../core/Module"));inherits(n,i),Object.defineProperty(n.prototype,"nslices",{get:function(){return this._nslices},set:function(t){this._nslices=t,this._setBufferSize()}}),Object.defineProperty(n.prototype,"slice",{get:function(){return this._slice},set:function(t){this._slice=t,this._setBufferSize()}}),Object.defineProperty(n.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t,this._setBufferSize()}}),Object.defineProperty(n.prototype,"startOfst",{get:function(){return this._startOfst},set:function(t){this._startOfst=t,this._setBufferSize()}}),Object.defineProperty(n.prototype,"endOfst",{get:function(){return this._endOfst},set:function(t){this._endOfst=t,this._setBufferSize()}}),n.prototype._setBufferSize=function(){var t=this._originalBuffer;if(t){var e=t.end-t.start,o=e/this.nslices,n=t.start+this.slice*o,i=n+this.length*o;n*=1+this._startOfst,i*=1+this._endOfst,this.buffer={buffer:t.buffer,start:n,end:i,loop:!1},this.$data.emit({_type:"buffer",buffer:this.buffer})}},n.prototype.setBuffer=function(t){"buffer"===t._type&&(this._originalBuffer=t.buffer,this._setBufferSize())},n.prototype.onConnect=function(t){this.buffer&&this.$data.emitTo(t,{_type:"buffer",buffer:this.buffer})},n.prototype.descriptor={type:"BufferSlice",name:"BufferSlice",size:5,inputs:{buffer:{type:"event",x:4,y:0,endPoint:"setBuffer",label:null,singleConnection:!0}},outputs:{data:{type:"event",x:5,y:0,label:null,onConnect:"onConnect"}},controls:{nslice:{type:"knob",x:.2,y:.5,min:2,max:32,endPoint:null,value:"nslices",label:"SLC",int:!0},slice:{type:"knob",x:2.2,y:.5,min:0,max:31,endPoint:null,value:"slice",label:"#",int:!0},length:{type:"knob",x:4.2,y:.5,min:1,max:32,endPoint:null,value:"length",label:"LEN",int:!0},sofst:{type:"knob",x:1.2,y:2.5,min:-.1,max:.1,endPoint:null,value:"startOfst",label:"STR"},eofst:{type:"knob",x:3.2,y:2.5,min:-.1,max:.1,endPoint:null,value:"endOfst",label:"END"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],33:[function(t,e,o){function n(){this.buffer=null,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.setBuffer=function(t){if("buffer"===t._type){var e=t.buffer.buffer,o=e.numberOfChannels,n=e.sampleRate,a=t.buffer.start*n,r=e.length-a;t.buffer.end&&(t.buffer.end>0?r=(t.buffer.end-t.buffer.start)*n:r+=t.buffer.end*n);for(var s=i.createBuffer(o,r,n),u=0;u<o;u++)e.copyFromChannel(s.getChannelData(u),u,a);this.buffer={buffer:s,start:0,end:0,loop:!1},this.$data.emit({_type:"buffer",buffer:this.buffer})}},n.prototype.onConnect=function(t){this.buffer&&this.$data.emitTo(t,{_type:"buffer",buffer:this.buffer})},n.prototype.descriptor={type:"BufferTrim",name:"BufferTrim",size:2,inputs:{buffer:{type:"event",x:0,y:1,endPoint:"setBuffer",label:"BUF",singleConnection:!0}},outputs:{data:{type:"event",x:3,y:1,label:"TRIM",onConnect:"onConnect"}},controls:{}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],34:[function(t,e,o){function n(){this.node=i,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Context",name:"Context",size:1,inputs:{DEST:{type:"audio",x:3,y:0,endPoint:"node.destination",label:"DEST"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],35:[function(t,e,o){function n(){this.channel=0,this.control=0,this.learn=!1,this.glide=.1,a.call(this),this._setTitle()}var i=t("../core/audioContext"),a=t("../core/Module"),r=t("../core/utils").map;inherits(n,a),n.prototype.onMessage=function(t){if("midi message"===t._type&&"control change"===t.midiType){if(this.learn)return this.channel=t.channel,this.control=t.control,this.learn=!1,this.setBorder(""),void this._setTitle();if(t.channel===this.channel&&t.control===this.control){var e=i.currentTime,o=this.glide,n=r(t.value,0,127,0,1);this.$OUT.setAutomation(function(t,i,a){t.cancelScheduledValues(0),t.setValueAtTime(t.value,e),t.linearRampToValueAtTime(r(n,0,1,i,a),e+o)})}}},n.prototype.midiLearn=function(){this.learn=!0,this.setBorder("#F00")},n.prototype._setTitle=function(){this.setTitle("CC#"+this.channel+":"+this.control)},n.prototype.setState=function(t){a.prototype.setState.call(this,t),this._setTitle()},n.prototype.descriptor={type:"ControlChange",name:"Control Change",size:3,inputs:{IN:{type:"event",x:0,y:1,label:"IN",endPoint:"onMessage"}},outputs:{OUT:{type:"param",x:0,y:2,label:"OUT"}},controls:{glide:{type:"knob",x:4,y:.5,min:0,max:1,endPoint:"",value:"glide",label:"GLID"},midiLearn:{type:"button",x:2.3,y:1,endPoint:"midiLearn"}},persistent:["channel","control"]},e.exports=n},{"../core/Module":13,"../core/audioContext":16,"../core/utils":20}],36:[function(t,e,o){function n(){this.node=i.createConvolver(),this.bufferData=null,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.setBuffer=function(t){if("buffer"===t._type){this.bufferData&&(this.node.disconnect(),this.node=i.createConvolver(),this.bufferData=null,this.rebind()),this.bufferData=t.buffer;var e=this.bufferData.buffer;this.node.buffer=e}},n.prototype.descriptor={type:"Convolver",name:"Convolver",size:3,inputs:{IN:{type:"audio",x:3,y:1,endPoint:"node",label:"IN"},buffer:{type:"event",x:0,y:1,endPoint:"setBuffer",label:"BUF"}},outputs:{OUT:{type:"audio",x:3,y:2,endPoint:"node",label:"OUT"}},controls:{}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],37:[function(t,e,o){function n(){this._hour=12,this._minute=0,this.data=null,this.dateTimeout=null,this.knobTimeout=null,i.call(this)}var i=t("../core/Module");inherits(n,i),n.prototype.onDataIn=function(t){this.data=data},n.prototype.updateTimeout=function(){var t=this;this.knobTimeout&&window.clearTimeout(this.knobTimeout),this.knobTimeout=window.setTimeout(function(){t.setTimeout()},1e3)},n.prototype.setTimeout=function(){var t=this;this.dateTimeout&&window.clearTimeout(this.dateTimeout);var e=new Date,o=60*e.getHours()+e.getMinutes(),n=60*this._hour+this._minute,i=n-o;i<=0&&(i=1440+i),t.dateTimeout=window.setTimeout(function(){t.dateTimeout=null,t.$OUT.emit(t.data),t.setTimeout()},60*i*1e3)},n.prototype.remove=function(){this.knobTimeout&&window.clearTimeout(this.knobTimeout),this.dateTimeout&&window.clearTimeout(this.dateTimeout),i.prototype.remove.call(this)},Object.defineProperty(n.prototype,"hour",{get:function(){return this._hour},set:function(t){this._hour=t,this.updateTimeout()}}),Object.defineProperty(n.prototype,"minute",{get:function(){return this._minute},set:function(t){this._minute=t,this.updateTimeout()}}),n.prototype.descriptor={type:"DateBang",name:"DateBang",size:3,inputs:{IN:{type:"event",x:3.5,y:0,label:"IN",endPoint:"onDataIn",singleConnection:!0}},outputs:{OUT:{type:"event",x:3.5,y:2,label:"OUT"}},controls:{hour:{type:"knob",x:0,y:.6,min:0,max:23,int:!0,endPoint:null,value:"hour",label:"HOUR"},minute:{type:"knob",x:1.8,y:.6,min:0,max:59,int:!0,endPoint:null,value:"minute",label:"MIN"}}},e.exports=n},{"../core/Module":13}],38:[function(t,e,o){function n(){this.node=i.createDelay(1),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Delay",name:"Delay",size:3,inputs:{IN:{type:"audio",x:0,y:1,endPoint:"node",label:"IN"}},outputs:{OUT:{type:"audio",x:3.6,y:1,endPoint:"node",label:"OUT"}},controls:{delay:{type:"knob",x:2,y:.3,min:.01,max:1,endPoint:"node.delayTime",value:"value",label:"TIME"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],39:[function(t,e,o){function n(){a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.onTrigger=function(){var t=i.currentTime,e=1,o=1,n=2;this.$OUT.setAutomation(function(i,a,r){var s=i.value;i.cancelScheduledValues(0),i.setValueAtTime(s,t),i.linearRampToValueAtTime(r,t+e),i.setValueAtTime(r,t+e+o),i.linearRampToValueAtTime(a,t+e+o+n)})},n.prototype.descriptor={type:"Envelope",name:"Envelope",size:2,inputs:{TRG:{type:"event",x:0,y:1,label:"TRG",endPoint:"onTrigger"}},outputs:{OUT:{type:"param",x:3.5,y:1,label:"OUT"}},controls:{}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],40:[function(t,e,o){function n(){this.delay=10,i.call(this)}var i=t("../core/Module");inherits(n,i),n.prototype.onDataIn=function(t){var e=this;window.setTimeout(function(){try{e.$OUT.emit(t)}catch(t){}},1e3*this.delay)},n.prototype.descriptor={type:"EventDelay",name:"EventDelay",size:2,inputs:{IN:{type:"event",x:0,y:.9,label:"IN",endPoint:"onDataIn"}},outputs:{OUT:{type:"event",x:2,y:.9,label:"OUT"}},controls:{delay:{type:"knob",x:4,y:0,min:1,max:200,int:!0,endPoint:null,value:"delay"}}},e.exports=n},{"../core/Module":13}],41:[function(t,e,o){function n(){i.call(this),this.map=new WeakMap,this.data=[],this.index=0}var i=t("../core/Module");inherits(n,i),n.prototype.removeData=function(t){var e=this.map.get(t);if(e){this.map.delete(t);var o=this.data.indexOf(e);return o===-1?console.error("data not in the pool"):void this.data.splice(o,1)}},n.prototype.onDataIn=function(t,e){this.removeData(e),this.map.set(e,t),this.data.push(t)},n.prototype.onDisconnect=function(t){this.removeData(t)},n.prototype.onTrigger=function(t){0!==this.data.length&&(this.index=(this.index+1)%this.data.length,this.$OUT.emit(this.data[this.index]))},n.prototype.descriptor={type:"EventPool",name:"EventPool",size:2,inputs:{IN:{type:"event",x:0,y:1,label:"DATA",endPoint:"onDataIn",onDisconnect:"onDisconnect"},TRG:{type:"event",x:3.5,y:0,label:"TRG",endPoint:"onTrigger"}},outputs:{OUT:{type:"event",x:3.5,y:1,label:"OUT"}},controls:{}},e.exports=n},{"../core/Module":13}],42:[function(t,e,o){function n(){this.target=.5,this.duration=4,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module"),r=t("../core/utils").map;inherits(n,a),n.prototype.onTrigger=function(){var t=i.currentTime,e=this.target,o=this.duration;this.$OUT.setAutomation(function(n,i,a){var s=n.value;n.cancelScheduledValues(0),n.setValueAtTime(s,t),n.linearRampToValueAtTime(r(e,0,1,i,a),t+o)})},n.prototype.descriptor={type:"Fade",name:"Fade",size:3,inputs:{TRG:{type:"event",x:0,y:1,label:"TRG",endPoint:"onTrigger"}},outputs:{OUT:{type:"param",x:0,y:2,label:"ENV"}},controls:{target:{type:"knob",x:2.1,y:.3,min:0,max:1,value:"target",label:"TO"},duration:{type:"knob",x:4,y:.3,min:.1,max:20,value:"duration",label:"TIME"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16,"../core/utils":20}],43:[function(t,e,o){function n(){this.node=i.createBiquadFilter(),this._filterType=0,this.node.type=r[this._filterType].id,a.call(this),this.$$type.setTitle(r[this._filterType].caption)}var i=t("../core/audioContext"),a=t("../core/Module"),r=[{id:"lowpass",caption:"LP"},{id:"highpass",caption:"HP"},{id:"bandpass",caption:"BP"}];inherits(n,a),n.prototype.switchType=function(){this.filterType+=1},Object.defineProperty(n.prototype,"filterType",{get:function(){return this._filterType},set:function(t){this._filterType=t%r.length,this.node.type=r[this._filterType].id,this.$$type.setTitle(r[this._filterType].caption)}}),n.prototype.descriptor={type:"Filter",name:"Filter",size:4,inputs:{IN:{type:"audio",x:.5,y:3,endPoint:"node",label:"IN"}},outputs:{OUT:{type:"audio",x:3,y:3,endPoint:"node",label:"OUT"}},controls:{cut:{type:"knob",x:2,y:.3,min:10,max:8e3,endPoint:"node.frequency",value:"value",label:"CUT"},res:{type:"knob",x:4,y:.3,min:0,max:40,endPoint:"node.Q",value:"value",label:"REZ"},type:{type:"button",x:.2,y:1.2,endPoint:"switchType"}},persistent:["filterType"]},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],44:[function(t,e,o){function n(){i.call(this)}var i=(t("../core/audioContext"),t("./Filter"));inherits(n,i),n.prototype.descriptor={type:"FilterMod",name:"FilterMod",size:3,inputs:{IN:{type:"audio",x:2.2,y:1,endPoint:"node",label:"IN"},CUT:{type:"param",x:0,y:1,endPoint:"node.frequency",label:"CUT",min:10,max:8e3},RES:{type:"param",x:0,y:2,endPoint:"node.Q",label:"RES",min:0,max:40}},outputs:{OUT:{type:"audio",x:2.2,y:2,endPoint:"node",label:"OUT"}},controls:{type:{type:"button",x:4.2,y:1.1,endPoint:"switchType"}},persistent:["filterType"]},e.exports=n},{"../core/audioContext":16,"./Filter":43}],45:[function(t,e,o){function n(){this.node=i.createGain(),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Gain",name:"Gain x100",size:3,inputs:{IN:{type:"audio",x:3.5,y:.2,endPoint:"node",label:"IN"}},outputs:{OUT:{type:"audio",x:3.5,y:2,endPoint:"node",label:"OUT"}},controls:{gain:{type:"knob",x:1.5,y:.5,min:1,max:100,endPoint:"node.gain",value:"value",label:"GAIN"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],46:[function(t,e,o){function n(){this._waveType=0,this.node=i.createOscillator(),this.node.frequency.value=2,this.node.type=WAVEFORM_TYPE_ENUM[this._waveType].id,this.node.start(),a.call(this),this.$$type.setTitle(WAVEFORM_TYPE_ENUM[this._waveType].caption)}var i=t("../core/audioContext"),a=t("../core/Module");WAVEFORM_TYPE_ENUM=[{id:"sine",caption:"sin"},{id:"square",caption:"sqr"},{id:"sawtooth",caption:"saw"},{id:"triangle",caption:"tri"}],inherits(n,a),n.prototype.switchType=function(){this.waveform+=1},Object.defineProperty(n.prototype,"waveform",{get:function(){return this._waveType},set:function(t){this._waveType=t%WAVEFORM_TYPE_ENUM.length,this.node.type=WAVEFORM_TYPE_ENUM[this._waveType].id,this.$$type.setTitle(WAVEFORM_TYPE_ENUM[this._waveType].caption)}}),n.prototype.descriptor={type:"LFO",name:"LFO",size:3,inputs:{},outputs:{OUT:{type:"audio",x:5,y:1,endPoint:"node",label:null}},controls:{frequency:{type:"knob",x:2.5,y:.3,min:.001,max:10,endPoint:"node.frequency",value:"value",label:"FREQ"},type:{type:"button",x:.2,y:1.2,endPoint:"switchType"}},persistent:["waveform"]},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],47:[function(t,e,o){function n(){i.call(this),a.open();var t=this;this.onMessage=function(e){t.$OUT.emit(e)},a.on("message",this.onMessage)}var i=t("../core/Module"),a=t("../core/MIDI");inherits(n,i),n.prototype.remove=function(){a.removeListener("message",this.onMessage),i.prototype.remove.call(this)},n.prototype.descriptor={type:"MidiIn",name:"MidiIn",size:1,inputs:{},outputs:{OUT:{type:"event",x:5,y:0}},controls:{}},e.exports=n},{"../core/MIDI":12,"../core/Module":13}],48:[function(t,e,o){function n(){this.node=i.createDelay(1),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"ModDelay",name:"ModDelay",size:2,inputs:{time:{type:"param",x:0,y:1,endPoint:"node.delayTime",label:"TIME"},IN:{type:"audio",x:3.6,y:0,endPoint:"node",label:"IN"}},outputs:{OUT:{type:"audio",x:3.6,y:1,endPoint:"node",label:"OUT"}},controls:{}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],49:[function(t,e,o){function n(){this.node=i.createStereoPanner(),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"ModPanner",name:"ModPan",size:2,inputs:{IN:{type:"audio",x:3.5,y:0,endPoint:"node",label:"IN"},pan:{type:"param",x:0,y:1,endPoint:"node.pan",label:"PAN"}},outputs:{OUT:{type:"audio",x:3.5,y:1,endPoint:"node",label:"OUT"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],50:[function(t,e,o){function n(){this.note=a,i.call(this)}var i=t("../core/Module"),a=60;inherits(n,i),n.prototype.onEvent=function(t){"midi message"===t._type&&"note on"===t.midiType&&t.note===this.note&&this.$OUT.emit(t)},n.prototype.descriptor={type:"NoteDetect",name:"note detect",size:3,inputs:{IN:{type:"event",x:4,y:0,endPoint:"onEvent"}},outputs:{OUT:{type:"event",x:5,y:0}},controls:{note:{type:"knob",x:1.5,y:.5,min:0,max:127,endPoint:null,value:"note",label:"NOTE",int:!0}}},e.exports=n},{"../core/Module":13}],51:[function(t,e,o){function n(){i.call(this)}var i=t("../core/Module"),a=60;inherits(n,i),n.prototype.onEvent=function(t){if("midi message"===t._type&&"note on"===t.midiType){var e=t.note-a;t.playbackRate=Math.pow(2,e/12),this.$OUT.emit(t)}},n.prototype.descriptor={type:"noteOnFilter",name:"noteOn",size:1,inputs:{IN:{type:"event",x:4,y:0,endPoint:"onEvent"}},outputs:{OUT:{type:"event",x:5,y:0}},controls:{}},e.exports=n},{"../core/Module":13}],52:[function(t,e,o){function n(){i.call(this),this.data=null;var t=this;window.setTimeout(function(){t.$OUT.emit(t.data)},0)}var i=t("../core/Module");inherits(n,i),n.prototype.onDataIn=function(t){this.data=t},n.prototype.descriptor={type:"OnLoadBang",name:"OnLoad",size:1,inputs:{IN:{type:"event",x:4,y:0,endPoint:"onDataIn",singleConnection:!0}},outputs:{OUT:{type:"event",x:5,y:0}},controls:{}},e.exports=n},{"../core/Module":13}],53:[function(t,e,o){function n(){this.node=i.createGain(),this.bufferData=null,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.setBuffer=function(t){"buffer"===t._type&&(this.bufferData=t.buffer)},n.prototype.trigger=function(t){if(this.bufferData){var e=i.createBufferSource();e.connect(this.node),e.buffer=this.bufferData.buffer,t.playbackRate&&(e.playbackRate.value=t.playbackRate);var o=t.offset||0;e.start(0,o)}},n.prototype.descriptor={type:"OneShotSampler",name:"OneShot",size:3,inputs:{buffer:{type:"event",x:0,y:2,endPoint:"setBuffer",label:"BUF"},trigger:{type:"event",x:0,y:1,endPoint:"trigger",label:"TRIG"}},outputs:{OUT:{type:"audio",x:5,y:2,endPoint:"node"}},controls:{volume:{type:"knob",x:2.8,y:.5,min:0,max:1,endPoint:"node.gain",value:"value",label:"VOL"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],54:[function(t,e,o){function n(){this.node=i.createOscillator(),this.node.frequency.value=220,this.node.start(),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Oscillator",name:"Oscillator",size:3,inputs:{detune:{type:"param",x:0,y:1,endPoint:"node.detune",label:"DTN"}},outputs:{OUT:{type:"audio",x:0,y:2,endPoint:"node",label:"OUT"}},controls:{frequency:{type:"knob",x:3.7,y:.3,min:110,max:880,endPoint:"node.frequency",value:"value",label:"FREQ"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],55:[function(t,e,o){function n(){this.node=i.createStereoPanner(),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Panner",name:"Pan",size:2,inputs:{IN:{type:"audio",x:3.5,y:0,endPoint:"node",label:"IN"}},outputs:{OUT:{type:"audio",x:3.5,y:1,endPoint:"node",label:"OUT"}},controls:{pan:{type:"knob",x:1.5,y:0,min:-1,max:1,endPoint:"node.pan",value:"value"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],56:[function(t,e,o){function n(){this.playbackRate=1,this.data=null,i.call(this)}var i=t("../core/Module");inherits(n,i),n.prototype.onDataIn=function(t){t.playbackRate=this.playbackRate,this.data=t,this.$OUT.emit(t)},n.prototype.onConnect=function(t){this.data&&this.$OUT.emitTo(t,this.data)},n.prototype.descriptor={type:"PlaybackRate",name:"PlaybackRate",size:3,inputs:{IN:{type:"event",x:.5,y:1.5,endPoint:"onDataIn"}},outputs:{OUT:{type:"event",x:4.5,y:1.5,onConnect:"onConnect"}},controls:{rate:{type:"knob",x:2,y:1,min:.01,max:2,endPoint:null,value:"playbackRate"}}},e.exports=n},{"../core/Module":13}],57:[function(t,e,o){function n(){this.data=null,this.min=5,this.max=20,this.timeout=null,i.call(this),this.scheduleNext()}var i=t("../core/Module"),a=t("../core/utils").map;inherits(n,i),n.prototype.onDataIn=function(t){this.data=t},n.prototype.scheduleNext=function(){var t=this,e=a(Math.random(),0,1,this.min,this.max);this.timeout=window.setTimeout(function(){t.$OUT.emit(this.data),t.scheduleNext()},1e3*e)},n.prototype.remove=function(){null!==this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null),i.prototype.remove.call(this)},n.prototype.descriptor={type:"RandomBang",name:"RandomBang",size:3,inputs:{IN:{type:"event",x:5,y:1,endPoint:"onDataIn"}},outputs:{OUT:{type:"event",x:5,y:2}},controls:{min:{type:"knob",x:.5,y:.5,min:1,max:100,value:"min",label:"MIN"},max:{type:"knob",x:2.5,y:.5,min:1,max:100,value:"max",label:"MAX"}}},e.exports=n},{"../core/Module":13,"../core/utils":20}],58:[function(t,e,o){function n(){this.node=i.createBufferSource(),this.bufferData=null,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.setBuffer=function(t){if("buffer"===t._type){if(this.bufferData){var e=this.node.playbackRate.value;this.node.disconnect(),this.node=i.createBufferSource(),this.bufferData=null,this.node.playbackRate.value=e,this.rebind()}this.bufferData=t.buffer;var o=this.bufferData.buffer,n=this.bufferData.loop||!1;if(this.node.buffer=o,this.node.loop=n,n){var a=this.bufferData.start||0,r=this.bufferData.end||o.duration;r<0&&(r=o.duration+r),r<0&&(r=0),this.node.loopStart=a,this.node.loopEnd=r}this.node.start()}},n.prototype.descriptor={type:"Sampler",name:"Sampler",size:3,inputs:{buffer:{type:"event",x:0,y:1,endPoint:"setBuffer",label:"BUF"}},outputs:{OUT:{type:"audio",x:0,y:2,endPoint:"node",label:"OUT"}},controls:{rate:{type:"knob",x:3.7,y:.3,min:.01,max:2,endPoint:"node.playbackRate",value:"value",label:"RATE"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],59:[function(t,e,o){function n(){i.call(this),this.node.frequency.value=.005,this.$$frequency.initValue()}var i=t("./LFO");t("../core/audioContext");inherits(n,i),n.prototype.descriptor={type:"SlowLFO",name:"SlowLFO",size:3,inputs:{},outputs:{OUT:{type:"audio",x:5,y:1,endPoint:"node",label:null}},controls:{frequency:{type:"knob",x:2.8,y:.3,min:1e-4,max:.01,endPoint:"node.frequency",value:"value",label:"FREQ"},type:{type:"button",x:.2,y:1.2,endPoint:"switchType"}},persistent:["waveform"]},e.exports=n},{"../core/audioContext":16,"./LFO":46}],60:[function(t,e,o){function n(){i.call(this)}var i=t("../core/Module");inherits(n,i),n.prototype.doStuff=function(t){"color"===t._type&&(this.setTitle("#"+t.hex),this.setColor("#"+t.hex))},n.prototype.onConnect=function(t){console.log("module has connected",this,t)},n.prototype.pushButton=function(){var t=("000"+(~~(4096*Math.random())).toString(16)).substr(-3);this.$B.emit({_type:"color",hex:t})},n.prototype.descriptor={type:"TestModule",name:"TestModule",size:5,inputs:{A:{type:"event",x:.2,y:1,label:"A",endPoint:"doStuff"}},outputs:{B:{type:"event",x:3.2,y:1,label:"B",onConnect:"onConnect"}},controls:{a:{type:"knob",x:.1,y:2.3,label:"KNB"},b:{type:"knob",x:2.1,y:2.3,label:"KNB"},c:{type:"button",x:4.1,y:2.3,label:"BTN",endPoint:"pushButton"}}},e.exports=n},{"../core/Module":13}],61:[function(t,e,o){function n(){this.node=i.createGain(),a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.descriptor={type:"Volume",name:"Volume",size:3,inputs:{IN:{type:"audio",x:3.5,y:.2,endPoint:"node",label:"IN"}},outputs:{OUT:{type:"audio",x:3.5,y:2,endPoint:"node",label:"OUT"}},controls:{volume:{type:"knob",x:1.5,
y:.5,min:0,max:1,endPoint:"node.gain",value:"value",label:"VOL"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],62:[function(t,e,o){function n(){this.node=i.createGain(),this.bufferSource=null,this.fadeGain=null,this.fadeIn=5,this.fadeOut=5,a.call(this)}var i=t("../core/audioContext"),a=t("../core/Module");inherits(n,a),n.prototype.setBuffer=function(t){if("buffer"===t._type){var e=t.buffer,o=i.currentTime;if(this.bufferSource){var n=this.bufferSource,a=this.fadeGain,r=a.gain;r.cancelScheduledValues(0),r.setValueAtTime(r.value,o),r.linearRampToValueAtTime(0,o+this.fadeOut),window.setTimeout(function(){n.stop(),n.disconnect(),a.disconnect()},1e3*this.fadeOut)}var s=i.createBufferSource(),u=i.createGain();s.connect(u),u.connect(this.node),s.buffer=e.buffer,t.playbackRate&&(s.playbackRate.value=t.playbackRate);var l=t.offset||0,r=u.gain;r.setValueAtTime(0,o),r.linearRampToValueAtTime(1,o+this.fadeIn);var d=e.loop||!1;if(s.loop=d,d){var c=e.start||0,p=e.end||e.buffer.duration;p<0&&(p=e.buffer.duration+p),p<0&&(p=0),s.loopStart=c,s.loopEnd=p}s.start(0,l),this.bufferSource=s,this.fadeGain=u}},n.prototype.descriptor={type:"XFadeSampler",name:"XFadeSampler",size:4,inputs:{buffer:{type:"event",x:.5,y:3.1,endPoint:"setBuffer",label:"BUF"}},outputs:{OUT:{type:"audio",x:4.5,y:3.1,endPoint:"node"}},controls:{fadeIn:{type:"knob",x:0,y:.7,min:1,max:20,endPoint:null,value:"fadeIn",label:"IN"},fadeOut:{type:"knob",x:2,y:.7,min:1,max:20,endPoint:null,value:"fadeOut",label:"OUT"},volume:{type:"knob",x:4,y:.7,min:0,max:1,endPoint:"node.gain",value:"value",label:"VOL"}}},e.exports=n},{"../core/Module":13,"../core/audioContext":16}],63:[function(t,e,o){var n=t("../core/modules"),i=t("../core/moduleCategories");n.add(t("../core/Buffer"),i.DATA),n.add(t("./BufferTrim"),i.DATA),n.add(t("./BufferSlice"),i.DATA),n.add(t("./TestModule"),i.DATA),n.add(t("./EventPool"),i.DATA),n.add(t("./EventDelay"),i.DATA),n.add(t("./PlaybackRate"),i.DATA),n.add(t("./Bang"),i.CONTROL),n.add(t("./AutoBang"),i.CONTROL),n.add(t("./RandomBang"),i.CONTROL),n.add(t("./DateBang"),i.CONTROL),n.add(t("./OnLoadBang"),i.CONTROL),n.add(t("./MidiIn"),i.CONTROL),n.add(t("./NoteOnFilter"),i.CONTROL),n.add(t("./ControlChange"),i.CONTROL),n.add(t("./NoteDetect"),i.CONTROL),n.add(t("./Oscillator"),i.OSC),n.add(t("./LFO"),i.OSC),n.add(t("./SlowLFO"),i.OSC),n.add(t("./Envelope"),i.ENVELOPE),n.add(t("./Fade"),i.ENVELOPE),n.add(t("./Volume"),i.GAIN),n.add(t("./Amp"),i.GAIN),n.add(t("./AutoXFade"),i.GAIN),n.add(t("./Gain"),i.GAIN),n.add(t("./Panner"),i.GAIN),n.add(t("./ModPanner"),i.GAIN),n.add(t("./Sampler"),i.SAMPLER),n.add(t("./OneShotSampler"),i.SAMPLER),n.add(t("./XFadeSampler"),i.SAMPLER),n.add(t("./Filter"),i.FILTER),n.add(t("./FilterMod"),i.FILTER),n.add(t("./Convolver"),i.EFFECT),n.add(t("./Delay"),i.EFFECT),n.add(t("./ModDelay"),i.EFFECT),n.add(t("./Context"),i.IN_OUT)},{"../core/Buffer":5,"../core/moduleCategories":18,"../core/modules":19,"./Amp":28,"./AutoBang":29,"./AutoXFade":30,"./Bang":31,"./BufferSlice":32,"./BufferTrim":33,"./Context":34,"./ControlChange":35,"./Convolver":36,"./DateBang":37,"./Delay":38,"./Envelope":39,"./EventDelay":40,"./EventPool":41,"./Fade":42,"./Filter":43,"./FilterMod":44,"./Gain":45,"./LFO":46,"./MidiIn":47,"./ModDelay":48,"./ModPanner":49,"./NoteDetect":50,"./NoteOnFilter":51,"./OnLoadBang":52,"./OneShotSampler":53,"./Oscillator":54,"./Panner":55,"./PlaybackRate":56,"./RandomBang":57,"./Sampler":58,"./SlowLFO":59,"./TestModule":60,"./Volume":61,"./XFadeSampler":62}],64:[function(t,e,o){o.create=function(t,e){t.resize(10,9),t.addContainer(0,1,4,8),t.addContainer(3,1,4,8),t.addContainer(6,1,4,8),t.addLabel(1,0,2,"OSC"),t.addLabel(4,0,2,"MOD"),t.addLabel(7,0,2,"AMP"),t.addLabel(1,4,2,"frq"),t.addKnob(1,2).bind(e,"freq",300,2e3).autoUpdate(),t.addLabel(4,4,2,"mod"),t.addKnob(4,2).bind(e,"mod",-800,800).autoUpdate(),t.addLabel(4,7,2,"cv"),t.addKnob(4,5).bind(e,"modCurve",.1,3).autoUpdate(),t.addLabel(7,4,2,"d"),t.addKnob(7,2).bind(e,"envDuration",.1,3).autoUpdate(),t.addLabel(7,7,2,"cv"),t.addKnob(7,5).bind(e,"ampCurve",.1,3).autoUpdate()}},{}],65:[function(t,e,o){function n(){this.freq=440,this.t=0}function i(){this.duration=1,this.curve=0,this.t=0}function a(){this.osc=new n,this.modEnv=new i,this.ampEnv=new i,this.freq=440,this.fmod=30}var r=t("../../core/audioContext"),s=t("../../core/utils").copyObject,u=44100,l=2*Math.PI;n.prototype.reset=function(){this.t=0},n.prototype.tic=function(){var t=this.freq/u;return this.t+=t,this.t>1&&(this.t-=1),Math.sin(this.t*l)},i.prototype.reset=function(){this.t=0,this.v=1},i.prototype.tic=function(){var t=this.duration*u;this.t>t||(this.t+=1,this.v=Math.pow(1-this.t/t,this.curve))},a.prototype.reset=function(){this.osc.reset(),this.modEnv.reset(),this.ampEnv.reset()},a.prototype.tic=function(){return this.modEnv.tic(),this.ampEnv.tic(),this.osc.freq=this.freq+this.modEnv.v*this.fmod,this.osc.tic()*this.ampEnv.v};var d=new a,c={freq:440,mod:300,envDuration:.7,ampCurve:.2,modCurve:.5};o.generate=function(t,e){var o=t.params||s(c),n=o.ampDuration||1;d.reset(),d.freq=o.freq||c.freq,d.fmod=o.mod||c.mod,d.ampEnv.duration=o.envDuration||c.envDuration,d.modEnv.duration=o.envDuration||c.envDuration,d.ampEnv.curve=o.ampCurve||c.ampCurve,d.modEnv.curve=o.modCurve||c.modCurve;for(var i=r.createBuffer(1,n*u,u),a=i.getChannelData(0),l=0;l<a.length;l++)a[l]=d.tic();return t.buffer=i,t.start=0,t.end=n,window.setTimeout(e,0)}},{"../../core/audioContext":16,"../../core/utils":20}],66:[function(t,e,o){o.create=function(t,e){t.resize(18,9),t.addContainer(0,0,18,5),t.addContainer(0,4,6,5),t.addContainer(5,4,6,5),t.addContainer(10,4,8,5),t.addLabel(1,1,1,"PATTERN"),t.addKnob(1,5).bind(e,"tempo",50,300).setAsInt().autoUpdate(),t.addKnob(3,5).bind(e,"polyphony",1,8).setAsInt().autoUpdate(),t.addKnob(6,5).bind(e,"close",.1,.8).autoUpdate(),t.addKnob(8,5).bind(e,"accent",.1,.8).autoUpdate(),t.addKnob(15,5).bind(e,"offset",0,5e3).autoUpdate()}},{}],67:[function(t,e,o){function n(t){this.sample=t,this.head=0,this.decay=1,this.env=1,this.volume=1,this.stopped=!0}var i=t("../../core/audioContext"),a=t("../../loaders/loadAudioBuffer"),r=1e-4;n.prototype.start=function(t,e){this.decay=t,this.volume=e,this.head=0,this.env=1,this.stopped=!1},n.prototype.play=function(){if(this.stopped)return 0;if(this.head>=this.sample.length)return this.stopped=!0,0;var t=this.sample[this.head++],e=this.env*this.volume;return t*=e,this.env*=this.decay,e<r&&(this.stopped=!0),t},o.generate=function(t,e){var o=t.params,r=o.pattern||"C...",s=o.offset||0,u=o.polyphony||1,l=o.tempo||120,d=o.close||.5,c=o.accent||.5;a(o.uri,function(o,a){if(o)return e(o);var p=a.length-s,h=new Float32Array(p);a.copyFromChannel(h,0,s);for(var f=[],y=0;y<u;y++)f.push(new n(h));var m=a.sampleRate,v=~~(15*m/l),b=v*r.length;d=Math.pow(d,10/p);for(var g={O:{volume:1,decay:1},o:{volume:c,decay:1},C:{volume:1,decay:d},c:{volume:c,decay:d}},x=i.createBuffer(1,b,m),D=x.getChannelData(0),T=0,C=0,_=0,w=0;w<b;w++){if(0===C--){C=v;var E=g[r[T]];E&&(_=(_+1)%f.length,f[_].start(E.decay,E.volume)),T++}for(var B=0,y=0;y<f.length;y++)B+=f[y].play();D[w]=B}return t.buffer=x,t.start=0,t.end=x.duration,e()})}},{"../../core/audioContext":16,"../../loaders/loadAudioBuffer":24}],68:[function(t,e,o){var n=t("../ui/synthEditor"),i={noize:t("./noize"),hats:t("./hats"),disco:t("./disco")};o.getSynth=function(t){return i[t]},o.addSynth=function(t,e,o){i[t]=e,o&&n.register(t,o)}},{"../ui/synthEditor":93,"./disco":65,"./hats":67,"./noize":69}],69:[function(t,e,o){function n(){return Math.random()-.5}function i(){for(;;){var t=n();if(u+=t,!(u<-8||u>8))break;u-=t}return u/16}function a(t){return i()*t+n()*(1-t)}var r=t("../../core/audioContext"),s=44100,u=0;o.generate=function(t,e){var o=t.params,u=o.length||1,l=o.color||0,d=a;l<0&&(d=n),l>1&&(d=i);for(var c=r.createBuffer(1,u*s,s),p=c.getChannelData(0),h=0;h<p.length;h++)p[h]=d(l);return t.buffer=c,t.start=0,t.end=u,window.setTimeout(e,0)}},{"../../core/audioContext":16}],70:[function(t,e,o){function n(){this._dom=a("panel");var t=this,e=a("handle",this._dom);s(e,this._dom),e.addEventListener("mousedown",function(e){t.setOnTop()}),this.title=a("panelTitle",e);var o=a("closeButton",e);r(o,function(){t.close()})}var i=t("./domUtils"),a=i.createDiv,r=i.makeButton,s=i.makeDragable,u=null;n.prototype.setOnTop=function(){u&&(u.style.zIndex=null),this._dom.style.zIndex=11,u=this._dom},n.prototype.setTitle=function(t){this.title.innerText=t},n.prototype.open=function(){this._dom.style.display="",this.setOnTop()},n.prototype.close=function(){this._dom.style.display="none"},e.exports=n},{"./domUtils":79}],71:[function(t,e,o){function n(){function t(t){var n=l("editorButton "+t+"Icon",o);return d(n,function(){e.bufferData&&(e.bufferData[t]=!e.bufferData[t],n.style.backgroundColor=e.bufferData[t]?"#FFF":"#777",e.allowSave(!0))}),n}a.call(this);var e=this;this.close(),this.zoom=1,this.offset=0,this.bufferData=null,this.canSave=!1,this.scroll=l("hscroll",this._dom),this.scroll.style.width=p+"px",this.scrollContent=l("",this.scroll),this.scrollContent.style.width=~~(p/this.zoom)+"px",this.scrollContent.style.height="2px",this.scroll.addEventListener("scroll",function(){e.onScroll()}),this.canvas=u("canvas","waveformCanvas",this._dom),this.canvas.width=p,this.canvas.height=h,this.canvas.style.width=p+"px",this.canvas.style.height=h+"px",this.canvas.style.marginTop="2px",this.ctx=this.canvas.getContext("2d"),this.canvas.addEventListener("wheel",function(t){e.onWheel(t)}),this.canvas.addEventListener("mousedown",function(t){e.onClick(t)}),this.canvas.oncontextmenu=function(){return!1};var o=l("audioEditorMenu",this._dom);this.loopButton=t("loop"),this.irButton=t("ir"),l("flexSpacer",o),this.saveButton=l("editorButton saveIcon",o),d(this.saveButton,function(){e.canSave&&(e.allowSave(!1),i({command:"audio.saveProperties",bufferData:e.bufferData.serialize()}),r.setFlag("audio"))}),this.allowSave(!1);var n=l("",this._dom),s=u("input","tagInput",n);this.tags=l("tags",n),this.tags.style.width=p-105+"px",s.onkeypress=function(t){if(13===t.keyCode){var o=s.value;""!==o&&(s.value="",e.addNewTag(o))}}}var i=t("../loaders/sendRequest"),a=t("./Panel"),r=t("./beforeClose"),s=t("./domUtils"),u=s.createDom,l=s.createDiv,d=s.makeButton,c=s.removeDom,p=(s.makeDragable,600),h=200,f=~~(h/2);inherits(n,a),n.prototype.onScroll=function(){var t=this.scroll.scrollLeft;if(this.bufferData&&this.bufferData.buffer){var e=p/this.zoom;this.offset=~~(this.bufferData.buffer.length*t/e),this.drawWaveform()}},n.prototype.onWheel=function(t){var e=t.deltaY;if(this.bufferData&&this.bufferData.buffer){var o=.03125,n=this.zoom;this.zoom*=e<0?.625:1.6,this.zoom=Math.max(o,Math.min(1,this.zoom)),this.zoom!==n&&(this.offset=Math.min(this.offset,~~(this.bufferData.buffer.length*(1-this.zoom))),this.scrollContent.style.width=~~(p/this.zoom)+"px",this.drawWaveform())}},n.prototype.onClick=function(t){if(this.bufferData&&this.bufferData.buffer){var e=t.layerX,o=this.bufferData.buffer.length,n=this.bufferData.buffer.duration,i=o*this.zoom/p,a=this.offset+e*i;a=a/o*n,3===t.which?this.bufferData.end=a:this.bufferData.start=a,this.allowSave(!0),this.drawWaveform()}},n.prototype.allowSave=function(t){this.canSave=t,this.saveButton.style.opacity=t?1:0},n.prototype.drawWaveform=function(){var t=this.bufferData.buffer.getChannelData(0),e=this.bufferData.buffer.length,o=e*this.zoom/p;this.ctx.fillStyle="#05f5a7",this.ctx.clearRect(0,0,p,h);for(var n=1,i=-1,a=0;a<p;a++){for(var r=0;r<o;r++){var s=t[~~(this.offset+a*o+r)];s>i&&(i=s),s<n&&(n=s)}var u=~~((i-n)*f);u<1&&(u=1),this.ctx.fillRect(a,f-~~(i*f),1,u);var l=n;n=i,i=l}this.ctx.fillStyle="rgba(200,200,200,0.4)",this.ctx.fillRect(0,f,p,1),this.ctx.fillStyle="#F00";var d=this.bufferData.buffer.duration,c=this.bufferData.end;c<0&&(c=d+c);var y=d*this.zoom,m=this.offset/o,v=this.bufferData.start/y;c/=y,this.ctx.fillRect(p*v-m,0,1,h),this.ctx.fillRect(p*c-m,0,1,h)},n.prototype.setBuffer=function(t){var e=this;this.zoom=1,this.offset=0,this.allowSave(!1),this.setTitle(t.id),this.scrollContent.style.width=~~(p/this.zoom)+"px",this.ctx.clearRect(0,0,p,h),this.loopButton.style.backgroundColor=t.loop?"#FFF":"#777",this.irButton.style.backgroundColor=t.ir?"#FFF":"#777",this.bufferData=t,this.setTags(t),t.loadAudioBuffer(function(t){t||e.drawWaveform()})},n.prototype.setTags=function(t){if(this.tags.innerHTML="",t.tag)for(var e=0;e<t.tag.length;e++)this.addTag(t.tag[e])},n.prototype.addTag=function(t){var e=this,o=l("tag",this.tags);l("tagTitle",o).innerText=t;var n=l("closeButton",o);d(n,function(){c(o,e.tags);var n=e.bufferData.tag.indexOf(t);n!==-1&&(e.bufferData.tag.splice(n,1),e.allowSave(!0))})},n.prototype.addNewTag=function(t){this.bufferData&&this.bufferData.tag.indexOf(t)===-1&&(this.bufferData.tag.push(t),this.addTag(t),this.allowSave(!0))},e.exports=new n},{"../loaders/sendRequest":25,"./Panel":70,"./beforeClose":72,"./domUtils":79}],72:[function(t,e,o){var n=t("../loaders/sendRequest"),i={audio:!1};o.setFlag=function(t){i[t]=!0},window.onbeforeunload=function(){i.audio&&n({command:"audio.generateLibrary"})}},{"../loaders/sendRequest":25}],73:[function(t,e,o){function n(){function t(t,o){e.categoryFilter&&(n[e.categoryFilter].style.backgroundColor="");var i=o.category;e.categoryFilter=e.categoryFilter===i?null:i,e.categoryFilter&&(n[e.categoryFilter].style.backgroundColor="#FF0"),e.filter()}i.call(this);var e=this;this.bufferDataList=[],this.list=u("libraryList",this._dom),this.createEntries();var o=u("",this._dom);this.categoryFilter=null;var n={loop:null,shot:null,ir:null};for(var a in n){var r=u("editorButton "+a+"Icon",o);r.category=a,n[a]=r,c(r,t)}var s=l("input","tagInput",o);this.tagSection=u("bufferLibraryTags",this._dom),this.tags={},s.onkeypress=function(t){if(13===t.keyCode){var o=s.value;""!==o&&(s.value="",e.addTag(o))}}}var i=t("./Panel"),a=t("./moduleManager"),r=t("../core/Buffer"),s=t("./domUtils"),u=s.createDiv,l=s.createDom,d=s.removeDom,c=s.makeButton;inherits(n,i),n.prototype.addTag=function(t){var e=this,o="!"===t[0];if(o&&(t=t.substring(1,t.length)),void 0===this.tags[t]){this.tags[t]=!o;var n=u("tag",this.tagSection);o&&(n.style.backgroundColor="#da9387"),u("tagTitle",n).innerText=t;var i=u("closeButton",n);c(i,function(){d(n,e.tagSection),delete e.tags[t],e.filter()}),this.filter()}},n.prototype.filter=function(){var t=Object.keys(this.tags),e=null,o=!1;"loop"===this.categoryFilter&&(e=!0),"shot"===this.categoryFilter&&(e=!1),"ir"===this.categoryFilter&&(o=!0);for(var n=0;n<this.bufferDataList.length;n++){var i=this.bufferDataList[n],a=i.buffer,r=i.button;if(r.style.display="",null!==e&&!a.loop===e||!a.ir===o)r.style.display="none";else for(var s=a.tag||[],u=0;u<t.length;u++){var l=t[u];if(s.indexOf(l)!==-1^this.tags[l]){r.style.display="none";break}}}},n.prototype.add=function(t){var e=u("libraryEntry",this.list);e.textContent=t.id,e.addEventListener("mousedown",function(e){var o=a.addModule(new r(t));a.startDrag(o,e)}),this.bufferDataList.push({button:e,buffer:t})},n.prototype.createEntries=function(){var t=window.assets.buffers;for(var e in t)this.add(t[e])},e.exports=new n},{"../core/Buffer":5,"./Panel":70,"./domUtils":79,"./moduleManager":85}],74:[function(t,e,o){var n=t("../core/Button"),i=t("./constants"),a=t("./domUtils"),r=a.createDiv;n.prototype.initGUI=function(t,e,o){var n=this._dom=r("moduleButton",t._dom);n.style.left=o.x*i.CONNECTOR_GRID_SIZE+"px",n.style.top=o.y*i.CONNECTOR_GRID_SIZE+"px",o.label&&(r("label knobLabel",n).innerText=o.label),this._title=r("moduleButtonTitle",n);var a=this;n.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),a.endPoint.call(a.caller)})},n.prototype.setTitle=function(t){this._title.innerText=t}},{"../core/Button":6,"./constants":78,"./domUtils":79}],75:[function(t,e,o){var n=t("../core/Cable"),i=t("./constants"),a=t("./overlay").ctx;n.prototype.draw=function(){a.strokeStyle=this.color,a.beginPath(),a.moveTo(this.x,this.y),a.bezierCurveTo(this.a,this.b,this.c,this.d,this.w,this.h),a.stroke()},n.prototype.update=function(){this.x=this.endPointA.module.x*i.MODULE_WIDTH+this.endPointA.x*i.CONNECTOR_GRID_SIZE+8,this.y=this.endPointA.module.y*i.MODULE_HEIGHT+this.endPointA.y*i.CONNECTOR_GRID_SIZE+8,this.w=this.endPointB.module.x*i.MODULE_WIDTH+this.endPointB.x*i.CONNECTOR_GRID_SIZE+8,this.h=this.endPointB.module.y*i.MODULE_HEIGHT+this.endPointB.y*i.CONNECTOR_GRID_SIZE+8;var t=(this.w-this.x)/2,e=(this.h-this.y)/2;this.a=~~(this.x+t*Math.random()+10*Math.random()-5),this.b=~~(this.y+e*Math.random()+10*Math.random()-5),this.c=~~(this.x+t*(Math.random()+1)+10*Math.random()-5),this.d=~~(this.y+e*(Math.random()+1)+10*Math.random()-5)}},{"../core/Cable":7,"./constants":78,"./overlay":87}],76:[function(t,e,o){var n=t("../core/Connector"),i=t("./constants"),a=t("./domUtils").createDiv;n.prototype.initGUI=function(t,e,o){var n=this._dom=a("connector "+this.cssClassName,t._dom);o.label&&(a("label connectorLabel",n).innerText=o.label),void 0===this.x?n.style.position="relative":(n.style.left=this.x*i.CONNECTOR_GRID_SIZE+1+"px",n.style.top=this.y*i.CONNECTOR_GRID_SIZE+1+"px"),n.connector=this;var r=this;n.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),window.moduleManager.startConnection(r,t)})},n.prototype.setState=function(){this._dom.className="connector "+this.cssClassName+(this._nConnection>0?"-fill":"")}},{"../core/Connector":8,"./constants":78,"./domUtils":79}],77:[function(t,e,o){function n(){this.dom=a("connectorMenu"),this.selected=null;var t=this;this.dom.addEventListener("mouseleave",function(){t.hide()})}var i=t("./domUtils"),a=i.createDiv,r=i.makeButton;n.prototype.hide=function(){this.dom.style.display="none",this.dom.innerHTML="",this.selected=null},n.prototype.addEntry=function(t){var e=a("connectorMenuEntry",this.dom);return e.innerText=t,e.id=t,e},n.prototype.addDisconnectEntry=function(t,e){var o=this.addEntry(e),n=window.moduleManager,i=this;o.addEventListener("mousedown",function(){n.removeCable(t),i.hide()});var a=t.color;o.addEventListener("mouseleave",function(){t.color=a,n.drawCables()}),o.addEventListener("mouseenter",function(){t.color="#FFF",n.drawCables()})},n.prototype.show=function(t,e,o,n){if(this.selected=o,this.dom.style.left=Math.max(0,t-10)+"px",this.dom.style.top=Math.max(0,e-10)+"px",this.dom.style.display="block",this.dom.innerHTML="",1===n.length)return void this.addDisconnectEntry(n[0],"Disconnect");var i=this.addEntry("Disconnect all");a("connectorMenuSeparator",this.dom);var s=this;r(i,function(){s.hide();for(var t=0;t<n.length;t++)window.moduleManager.removeCable(n[t])});for(var u=[],l=0;l<n.length;l++)u.push(n[l].color);i.addEventListener("mouseleave",function(){for(var t=0;t<n.length;t++)n[t].color=u[t];moduleManager.drawCables()}),i.addEventListener("mouseenter",function(){for(var t=0;t<n.length;t++)n[t].color="#FFF";moduleManager.drawCables()});for(var l=0;l<n.length;l++){var d=n[l],c=d.endPointA===o?d.endPointB:d.endPointA,p=c.module.descriptor.name+":"+c.id;this.addDisconnectEntry(d,p)}},e.exports=new n},{"./domUtils":79}],78:[function(t,e,o){o.MODULE_WIDTH=92,o.MODULE_HEIGHT=16,o.CONNECTOR_GRID_SIZE=15,function(){var t=document.createElement("style");t.type="text/css";for(var e=o.MODULE_WIDTH-3,n=1;n<10;n++){var i=o.MODULE_HEIGHT*n-3,a=document.createTextNode(".x"+n+" { width: "+e+"px; height: "+i+"px; }");t.appendChild(a),document.getElementsByTagName("head")[0].appendChild(t)}}()},{}],79:[function(t,e,o){function n(t,e){function o(e){e.preventDefault(),t.style.left=e.clientX-a+"px",t.style.top=e.clientY-r+"px"}function n(t){t.preventDefault(),i.removeEventListener("mouseup",n),i.removeEventListener("mousemove",o)}var i=document;rect=t.getBoundingClientRect();var a=e.clientX-rect.left,r=e.clientY-rect.top;i.addEventListener("mousemove",o,!1),i.addEventListener("mouseup",n,!1)}var i=document.getElementsByTagName("body")[0];o.createDom=function(t,e,o){o=o||i;var n=document.createElement(t);return o.appendChild(n),e&&(n.className=e),n},o.createDiv=function(t,e){return o.createDom("div",t,e)},o.removeDom=function(t,e){e=e||i,e.removeChild(t)},o.makeButton=function(t,e){return t.addEventListener("mousedown",function(o){o.stopPropagation(),o.preventDefault(),e(o,t)}),t},o.makeDragable=function(t,e){return e=e||t,t.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),n(e,t)}),t}},{}],80:[function(t,e,o){function n(t){var e=new FileReader;e.onload=function(t){var e,o=t.target.result;try{e=JSON.parse(o)}catch(t){return console.error(t)}e._type&&"modularPatch"===e._type&&window.moduleManager.setPatch(e)},e.readAsText(t)}function i(t){var e=t.name.split(".");e.pop(),e=e.join(".");var o=window.assets.buffers[e];o||(o=new s(e,{uri:"audio/"+t.name})),r.setBuffer(o),r.open()}function a(t){var e=t.dataTransfer.files,o=e[0],a=o.name.split(".").pop();switch(a){case"json":n(o);break;case"mp3":i(o)}}var r=t("./audioEditor"),s=t("../data/BufferData");document.body.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},!1),document.body.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),a(t)},!1),document.addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation(),a(t)}),document.addEventListener("dragover",function(t){t.preventDefault(),t.stopPropagation()})},{"../data/BufferData":21,"./audioEditor":71}],81:[function(t,e,o){var n=t("../core/Knob"),i=t("./constants"),a=t("./domUtils").createDiv;n.prototype.initGUI=function(t,e,o){var n=this._dom=a("knob",t._dom);n.style.left=this.x*i.CONNECTOR_GRID_SIZE+2+"px",n.style.top=this.y*i.CONNECTOR_GRID_SIZE+2+"px",this._mark=a("knob knobMark",n),o.label&&(a("label knobLabel",n).innerText=o.label),this.valueDiplay=a("knobValueDisplay",n),this.valueDiplay.style.display="none",o.label||(this.valueDiplay.className+=" knobValueNoLabel");var r=this;n.addEventListener("mousedown",function(t){function e(t){t.preventDefault();var e=Math.max(-68,Math.min(68,i+n-t.clientY));r._mark.style.transform="rotate("+2*e+"deg)",r.value=e,r.updateValue()}function o(t){t.preventDefault(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",o),r.valueDiplay.style.display="none",r.updateValue()}t.stopPropagation(),t.preventDefault();var n=t.clientY,i=r.value;r.valueDiplay.style.display="",document.addEventListener("mousemove",e,!1),document.addEventListener("mouseup",o,!1)})},n.prototype.updateGUI=function(){this._mark.style.transform="rotate("+2*this.value+"deg)"},n.prototype.displayValue=function(t){var e=5,o="";0===t||(Math.abs(t)<.1?(t*=1e3,o="m",e=4):Math.abs(t)>=1e3&&(t/=1e3,o="K",e=4)),this.valueDiplay.innerText=t.toString().substring(0,e)+o}},{"../core/Knob":11,"./constants":78,"./domUtils":79}],82:[function(t,e,o){function n(t){return function(){t.open()}}function i(){for(var t in m)m[t].close()}function a(){var t=window.moduleManager.getPatch(),e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),o=h("a");o.setAttribute("href",e),o.setAttribute("download","patch.json"),o.click(),f(o)}function r(){}function s(){b._currentSubmenu&&(b._currentSubmenu.style.display="none",b._currentSubmenu=null,g=Date.now())}function u(t,e){if("separator"===t.type)return void p("submenuSeparator",e);var o=p("submenuItem",e);o.innerText=t.label,y(o,function(){t.click&&t.click(),s()})}function l(t){function e(){return b._currentSubmenu===i?void s():(s(),b._currentSubmenu=i,void(i.style.display=""))}if(t.label){var o=p("menuItem",b);o.innerText=t.label;var n=t.submenu;if(n){var i=p("submenu",o);i.style.display="none";for(var a=0;a<n.length;a++)u(n[a],i)}y(o,function(){e(),t.click&&t.click()}),o.addEventListener("mouseleave",s),o.addEventListener("mouseenter",function(){Date.now()<g+300&&e()})}}function d(t){for(var e=0;e<t.length;e++){var o=t[e];l(o)}}var c=t("./domUtils"),p=c.createDiv,h=c.createDom,f=c.removeDom,y=c.makeButton,m={audioEditor:t("./audioEditor"),moduleLibrary:t("./moduleLibrary"),bufferLibrary:t("./bufferLibrary"),synthEditor:t("./synthEditor")},v=[{label:"Patch",submenu:[{label:"Load Patch",click:null},{label:"Save Patch",click:null},{type:"separator"},{label:"Import Patch",click:r},{label:"Export Patch",click:a},{type:"separator"},{label:"Clear",click:function(){window.moduleManager.clearPatch()}}]},{label:"View",submenu:[{label:"Modules Library",type:"checkbox",checked:!0,click:n(m.moduleLibrary)},{label:"Buffers Library",type:"checkbox",checked:!0,click:n(m.bufferLibrary)},{label:"Audio Editor",type:"checkbox",checked:!0,click:n(m.audioEditor)},{type:"separator"},{label:"Close all",click:i}]}],b=p("menuHeader",null);b._currentSubmenu=null;var g=0;d(v)},{"./audioEditor":71,"./bufferLibrary":73,"./domUtils":79,"./moduleLibrary":84,"./synthEditor":93}],83:[function(t,e,o){var n=t("./domUtils"),i=n.createDiv,a=n.createDom,r=n.removeDom,s=t("./audioEditor"),u=t("./constants"),l=t("../core/Module"),d=t("../core/Buffer"),c=t("./synthEditor");l.prototype.initGUI=function(){var t=i("module x"+this.descriptor.size,null);this._title=a("span","",t),this._title.textContent=this.descriptor.name,this._dom=t,t.style.left=-10-u.MODULE_WIDTH+"px",t.module=this;var e=this;t.addEventListener("mousedown",function(t){window.moduleManager.startDrag(e,t)})},d.prototype.initGUI=function(){l.prototype.initGUI.call(this);var t=this;this._dom.addEventListener("dblclick",function(){if(t.buffer){var e=t.buffer.synthesizer;if(e&&c.hasEditor(e))return void c.open(e,t.buffer);s.setBuffer(t.buffer),s.open()}})},l.prototype.setTitle=function(t){this._title.textContent=t},l.prototype.setColor=function(t){this._dom.style.backgroundColor=t},l.prototype.setBorder=function(t){this._dom.style.borderColor=t},l.prototype.addClassName=function(t){this._dom.className+=" "+t},l.prototype.select=function(){this._title.className="selected"},l.prototype.deselect=function(){this._title.className=""},l.prototype.setPosition=function(t,e){this.x=t,this.y=e;var o=this._dom.style;o.left=u.MODULE_WIDTH*t+"px",o.top=u.MODULE_HEIGHT*e+"px";for(var n in this.cables)this.cables[n].update()},l.prototype.remove=function(){for(var t in this.cables)this.patch.removeCable(this.cables[t]);r(this._dom,null)}},{"../core/Buffer":5,"../core/Module":13,"./audioEditor":71,"./constants":78,"./domUtils":79,"./synthEditor":93}],84:[function(t,e,o){function n(){i.call(this),this._dom.style.left="150px",this.current=null,this.tabs={},this.lists={},this.tabHolder=l("libraryTabHolder",this._dom),this.listHolder=l("libraryListHolder",this._dom);for(var t in a)this.addTab(a[t]);this.addEntries(r.getList())}var i=t("./Panel"),a=t("../core/moduleCategories"),r=t("../core/modules"),s=t("./domUtils"),u=s.makeButton,l=s.createDiv;inherits(n,i),n.prototype.addTab=function(t){if(this.tabs[t])return this.tabs[t];var e=l("libraryTab",this.tabHolder),o=l("libraryList",this.listHolder);o.style.height="150px",o.style.display="none",e.innerText=t,this.tabs[t]=e,this.lists[t]=o,this.current||this.selectTab(t);var n=this;return u(e,function(){n.selectTab(t)}),e},n.prototype.selectTab=function(t){this.current!==t&&(this.current&&(this.lists[this.current].style.display="none",this.tabs[this.current].style.backgroundColor=""),this.current=t,this.lists[t].style.display="",this.tabs[this.current].style.backgroundColor="#FF0")},n.prototype.addEntries=function(t){for(var e in t)this.addEntry(t[e])},n.prototype.addEntry=function(t){var e=t.prototype.descriptor,o=e._category;if(e.name){var n=this.lists[o];if(!n)return console.error("category is not registered");var i=l("libraryEntry",n);i.textContent=e.name,i.addEventListener("mousedown",function(e){var o=window.moduleManager.addModule(new t);window.moduleManager.startDrag(o,e)})}};var d=new n;e.exports=d},{"../core/moduleCategories":18,"../core/modules":19,"./Panel":70,"./domUtils":79}],85:[function(t,e,o){function n(){this.patch=new a,this.selectedModules=[],this.registerKeyEvents()}var i=t("../core/Cable"),a=t("../core/Patch"),r=t("./constants"),s=t("./connectorMenu"),u=t("./overlay").ctx,l=t("./overlay").overCtx,d=t("./domUtils"),c=d.createDiv,p=d.removeDom,h="url(../img/jack-connect.png) 3 3, auto",f="url(../img/jack-free.png) 2 3, auto";n.prototype.addModule=function(t,e){return this.patch.addModule(t,e)},n.prototype.removeCable=function(t){this.patch.removeCable(t),this.drawCables()},n.prototype.clearPatch=function(){this.selectedModules=[],this.patch.clearPatch(),this.drawCables()},n.prototype.getPatch=function(){return this.patch.getPatch()},n.prototype.setPatch=function(t){this.patch.setPatch(t),this.drawCables()},n.prototype.registerKeyEvents=function(){function t(t){switch(t.keyCode){case 8:case 32:u.canvas.style.opacity=u.canvas.style.opacity?"":.4;break;case 46:e.deleteSelectedModules()}}var e=this;document.addEventListener("keydown",t,!1)},n.prototype.deleteSelectedModules=function(){for(var t=this.selectedModules,e=0;e<t.length;e++)this.patch.removeModule(t[e]);this.selectedModules=[],this.drawCables()},n.prototype.startDrag=function(t,e){function o(t){var e=t.x*r.MODULE_WIDTH,o=t.y*r.MODULE_HEIGHT,n=c("dummy",null);return n.style.width=r.MODULE_WIDTH-10+"px",n.style.height=t.descriptor.size*r.MODULE_HEIGHT-10+"px",n.style.left=e+"px",n.style.top=o+"px",n}function n(e){e.preventDefault();var n=e.clientX,i=e.clientY;Math.abs(n-d)<4&&Math.abs(n-d)<4||(y||(y=o(t)),y.style.left=n-d+"px",y.style.top=i-h+"px")}function i(e){if(e.preventDefault(),l.removeEventListener("mouseup",i),l.removeEventListener("mousemove",n),y||null===t.x){if(!y)return void u.patch._addModuleInGrid(t);p(y,null);var o=Math.max(0,~~Math.round((e.clientX-d)/r.MODULE_WIDTH)),a=Math.max(1,~~Math.round((e.clientY-h)/r.MODULE_HEIGHT));o===t.x&&a===t.y||(u.patch.moveModule(t,o,a),u.drawCables())}}var a,s,u=this,l=document;null===t.x?(a=e.clientX-r.MODULE_WIDTH/2,s=e.clientY-r.MODULE_HEIGHT/2):(a=t.x*r.MODULE_WIDTH,s=t.y*r.MODULE_HEIGHT);var d=e.clientX-a,h=e.clientY-s;if(u.selectedModules.indexOf(t)===-1){for(var f=0;f<u.selectedModules.length;f++)u.selectedModules[f].deselect();u.selectedModules=[t],t.select()}var y=null;l.addEventListener("mousemove",n,!1),l.addEventListener("mouseup",i,!1)},n.prototype.startConnection=function(t,e){function o(e){var o=e.clientX,n=e.clientY;if(e.preventDefault(),!(!drag&&Math.abs(o-u)<4&&Math.abs(n-d)<4)){drag=!0,l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.moveTo(c,p),l.lineTo(o,n),l.stroke();var i=s.elementFromPoint(o,n),a=i&&i.connector;a&&a.isCompatible&&a.isCompatible(t)?document.body.style.cursor=h:document.body.style.cursor=f}}function n(e){if(e.preventDefault(),s.removeEventListener("mouseup",n),s.removeEventListener("mousemove",o),document.body.style.cursor="",l.clearRect(0,0,l.canvas.width,l.canvas.height),!drag)return void a.showDisconnectMenu(e.clientX,e.clientY,t);var r=s.elementFromPoint(e.clientX,e.clientY),u=r.connector;if(u&&u!==t&&(!u||!u.isCompatible||u.isCompatible(t))){var d=i.prototype.getId(u,t),c=i.prototype.getId(t,u);a.patch.cables[d]||a.patch.cables[c]||(t.connect(u),a.drawCables())}}var a=this,s=document,u=e.clientX,d=e.clientY,c=t.module.x*r.MODULE_WIDTH+t.x*r.CONNECTOR_GRID_SIZE+8,p=t.module.y*r.MODULE_HEIGHT+t.y*r.CONNECTOR_GRID_SIZE+8;drag=!1,s.addEventListener("mousemove",o,!1),s.addEventListener("mouseup",n,!1)},n.prototype.showDisconnectMenu=function(t,e,o){var n=this.patch.findCables(o);0!==n.length&&s.show(t,e,o,n)},n.prototype.drawCables=function(){var t=this.patch.cables;u.clearRect(0,0,u.canvas.width,u.canvas.height);for(var e in t)t[e].draw()},n.prototype.shakeCables=function(){var t=this.patch.cables;u.clearRect(0,0,u.canvas.width,u.canvas.height);for(var e in t)t[e].update(),t[e].draw()};var y=new n;e.exports=y,window.moduleManager=y},{"../core/Cable":7,"../core/Patch":15,"./connectorMenu":77,"./constants":78,"./domUtils":79,"./overlay":87}],86:[function(t,e,o){var n=t("./overlay").reset,i=t("./moduleManager"),a=null;window.addEventListener("resize",function(t){null!==a&&window.clearTimeout(a),
a=window.setTimeout(function(){n(),i.drawCables(),a=null},50)})},{"./moduleManager":85,"./overlay":87}],87:[function(t,e,o){function n(t){t.height=window.innerHeight,t.width=window.innerWidth,t.style.width=t.width+"px",t.style.height=t.height+"px"}function i(){n(a),n(r),s.lineCap="round",s.shadowColor="#000",s.shadowBlur=3,s.lineWidth=3,s.shadowOffsetX=1,s.shadowOffsetY=1,u.lineWidth=3,u.strokeStyle="#444",u.lineCap="butt",u.setLineDash([3,3])}var a=document.getElementById("cableCanvas"),r=document.getElementById("overlayCanvas"),s=a.getContext("2d"),u=r.getContext("2d");i(),o.ctx=s,o.overCtx=u,o.reset=i},{}],88:[function(t,e,o){function n(t){this.dom=r("synthEdit-container",t.dom)}var i=t("./constants"),a=t("../domUtils"),r=(a.createDom,a.createDiv),s=(a.makeButton,a.removeDom,i.GRID_SIZE);e.exports=n,n.prototype.rect=function(t,e,o,n){return this.dom.style.left=t*s+"px",this.dom.style.top=e*s+"px",this.dom.style.width=o*s-20+"px",this.dom.style.height=n*s-20+"px",this}},{"../domUtils":79,"./constants":92}],89:[function(t,e,o){function n(t){this.editor=t,this.dom=u("synthEdit-knob",t.dom),this.canvas=s("canvas","synthEdit-knob-canvas",this.dom),this.ctx=this.canvas.getContext("2d"),this._color=i.getColor(0),this.value=0,this.min=0,this.max=0,this._obj=null,this._attribute=null,this._autoUpdate=!1,this._integer=!1,this._initCanvasContext(),this._initMouseEvents(),this._updateDisplay()}var i=t("./constants"),a=t("../domUtils"),r=t("../../core/utils").map,s=a.createDom,u=a.createDiv,l=(a.makeButton,a.removeDom,i.GRID_SIZE),d=2*Math.PI,c=-Math.PI-1,p=1,h=68;e.exports=n,n.prototype.bind=function(t,e,o,n){return this.min=o,this.max=n,this._obj=t,this._attribute=e,this.value=r(t[e],o,n,-h,h),this._updateDisplay(),this},n.prototype.autoUpdate=function(){return this._autoUpdate=!0,this},n.prototype.setAsInt=function(){return this._integer=!0,this},n.prototype.position=function(t,e){return this.dom.style.left=t*l+"px",this.dom.style.top=e*l+"px",this},n.prototype.color=function(t){return this._color=i.getColor(t),this._updateDisplay(),this},n.prototype._initCanvasContext=function(){this.canvas.width=32,this.canvas.height=32;var t=this.ctx;t.lineCap="butt",t.lineWidth=8},n.prototype._initMouseEvents=function(){var t=this;this.dom.addEventListener("mousedown",function(e){function o(e){e.preventDefault();var o=Math.max(-h,Math.min(h,a+i-e.clientY));t._setValue(o)}function n(e){e.preventDefault(),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",n),t._autoUpdate&&t._obj&&t.editor.updateBuffer()}e.stopPropagation(),e.preventDefault();var i=e.clientY,a=t.value;document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",n,!1)})},n.prototype._setValue=function(t){if(this.value=t,this._updateDisplay(),this._obj){var t=r(this.value,-h,h,this.min,this.max);this._integer&&(t=Math.round(t)),this._obj[this._attribute]=t}},n.prototype._updateDisplay=function(){var t=this.ctx;return t.clearRect(0,0,32,32),t.strokeStyle=this._color.low,t.beginPath(),t.arc(16,16,11,0,d),t.stroke(),t.strokeStyle=this._color.hi,t.beginPath(),t.arc(16,16,11,c,r(this.value,-h,h,c,p)),t.stroke(),this}},{"../../core/utils":20,"../domUtils":79,"./constants":92}],90:[function(t,e,o){function n(t){this.dom=r("synthEdit-label",t.dom)}var i=t("./constants"),a=t("../domUtils"),r=(a.createDom,a.createDiv),s=(a.makeButton,a.removeDom,i.GRID_SIZE);e.exports=n,n.prototype.position=function(t,e,o){return this.dom.style.left=t*s+"px",this.dom.style.top=e*s+"px",this.dom.style.width=o*s+"px",this},n.prototype.text=function(t){return this.dom.innerText=t,this},n.prototype.color=function(t){return this.dom.style.color=i.getColor(t).hi,this}},{"../domUtils":79,"./constants":92}],91:[function(t,e,o){function n(){i.call(this);var t=r("synthEdit-header",this._dom),e=this;this.loopBtn=r("synthedit-button",t),s(this.loopBtn,function(){e.bufferData&&(e.bufferData.loop=!e.bufferData.loop,e.toggleLoop())});var o=r("synthedit-button",t);o.style.backgroundImage="url(../img/iconSine.png)",s(o,function(){p.setBuffer(e.bufferData),p.open()}),r("synthedit-header-spacer",t),this.synthName=r("synthedit-header-synthName",t),this.dom=r("synthEdit-root",this._dom),this.bufferData=null,this.close()}var i=t("../Panel"),a=t("../domUtils"),r=(a.createDom,a.createDiv),s=a.makeButton,u=(a.removeDom,t("./constants").GRID_SIZE),l=t("./Container"),d=t("./Knob"),c=t("./Label"),p=t("../audioEditor");inherits(n,i),e.exports=n,n.prototype.init=function(t,e){return this.synthName.innerText=t,this.dom.innerHTML="",this.bufferData=e,this.toggleLoop(),this},n.prototype.updateBuffer=function(){var t=this.bufferData;t.generateBuffer(function(){})},n.prototype.toggleLoop=function(){var t=this.bufferData.loop;this.loopBtn.style.backgroundImage=t?"url(../img/iconLoop.png)":"url(../img/iconShot.png)"},n.prototype.resize=function(t,e){return this.dom.style.width=t*u+"px",this.dom.style.height=e*u+"px",this},n.prototype.addContainer=function(t,e,o,n){var i=new l(this).rect(t,e,o,n);return i},n.prototype.addKnob=function(t,e){var o=new d(this).position(t,e);return o},n.prototype.addLabel=function(t,e,o,n){var i=new c(this).position(t,e,o).text(n);return i}},{"../Panel":70,"../audioEditor":71,"../domUtils":79,"./Container":88,"./Knob":89,"./Label":90,"./constants":92}],92:[function(t,e,o){o.GRID_SIZE=16;var n=[{hi:"#BBB",low:"#444"},{hi:"#FB0203",low:"#400615"},{hi:"#07FC0B",low:"#024415"},{hi:"#00F",low:"#004"},{hi:"#FF0",low:"#440"},{hi:"#FF02FF",low:"#410158"},{hi:"#61F5E2",low:"#275359"}];o.COLORS=n;var i=n.length;o.getColor=function(t){return n[~~t%i]}},{}],93:[function(t,e,o){var n=t("./SynthEditorPanel"),i=new n,a={};o.register=function(t,e){a[t]=e},o.hasEditor=function(t){return!!a[t]},o.open=function(t,e){i.init(t,e);var o=a[t];return o?(o.create(i,e.params),i.open(),void i.setOnTop()):console.error('there is no editor for synth "'+t+'"')}},{"./SynthEditorPanel":91}],94:[function(t,e,o){function n(){}function i(e,o){function n(){i.update(),f(n)}if(e)return print(e),console.error(e);window.assets=o;var i=t("../src/main.js");i.update&&n()}var a=t("./pbxProjectData.json");window.settings=a.settings;var r=t("assetLoader");window.inherits=t("inherits");window.sfx=n,window.music=n,window.audioManager={addChannel:n,loadSound:n,playLoopSound:n,playSound:n,playSoundGroup:n,release:n,setMute:n,setVolume:n,setup:n,stopAllLoopSounds:n,stopLoopSound:n,settings:{}};var s=window.btn={},u=window.btnp={},l=window.btnr={},d={},c=[],p=0;!function(){var t=settings.controls||{up:38,down:40,left:37,right:39,A:32,B:88};for(var e in t){var o=t[e];d[o]=e,s[e]=!1,u[e]=!1,l[e]=!1,c.push(e)}p=c.length}(),window.chr$=function(t){return String.fromCharCode(t)},window.clip=function(t,e,o){return Math.max(e,Math.min(o,t))},window.random=function(t){return~~Math.round(t*Math.random())};var h=1/60,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,h)};r.preloadStaticAssets(a,i)},{"../src/main.js":26,"./pbxProjectData.json":3,assetLoader:1,inherits:2}]},{},[94]);